/*!2013-07-11 14:07:34 */
(function(e){function t(){"undefined"!=typeof instreet_config&&w(instreet_config,m),(o=l())&&(m.cssurl&&u.importFile("css",m.cssurl),C.requestAd(),u.bind(e,"load",function(){E.reLocate(),L()}),u.bind(e,"resize",function(){E.reLocate()}),N(C.adsArray))}if(!e.InstreetWidget||"object"!=typeof e.InstreetWidget){e.InstreetWidget={version:"@REVISION@",name:"InstreetImageWidget",style:"sprint"};var i=e.document,a=(e.navigator,e.location),n=(a.hostname,!!e.ActiveXObject),s=[],r=!0,o=null,c=null,l=function(){var e=i.createElement("div"),t=i.createElement("div");e.id="instreet-plugin-container",t.id="instreet-plugin-spotbox",e.appendChild(t);var a=i.getElementsByTagName[0]||i.documentElement;return a.firstChild&&a.insertBefore(e,a.firstChild),e},d=[{widgetSid:"746YRj7kfucKZSZc3KfGo0",containerId:"picbox",leftClass:"p_left",leftTitle:"上一张",rightClass:"p_right",rightTitle:"下一张"}],p=["adApp","shopApp","weiboApp","wikiApp","newsApp","weatherApp","musicApp","videoApp","shareApp"],h="http://push.instreet.cn/",m={redurl:h+"click.action",callbackurl:h+"push.action",murl:h+"tracker.action",iurl:h+"tracker90.action",ourl:h+"loadImage.action",surl:h+"share/weiboshare",cssurl:"http://static.instreet.cn/widgets/push/css/instreet.sprint.min.css",imih:300,imiw:300,timer:1e3,width:250,height:250},u={bind:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i},remove:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.datachEvent?e.datachEvent("on"+t,i):e["on"+t]=null},getEvent:function(t){return t?t:e.event},getTarget:function(e){return e.target||e.srcElement},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getRelatedTarget:function(e){return e.relatedTarget?e.relatedTarget:"mouseover"==e.type?e.fromElement:"mouseout"==e.type?e.toElement:null},getXY:function(e){var t=0,a=0;if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),s=i.documentElement;t=n.left+Math.max(s.scrollLeft,i.body.scrollLeft)-s.clientLeft,a=n.top+Math.max(s.scrollTop,i.body.scrollTop)-s.clientTop}else for(;e!=i.body;t+=e.offsetLeft,a+=e.offsetTop,e=e.offsetParent);return{x:t,y:a}},aTrim:function(e){function t(e,t){return e-t}var i=[];e.sort(t);for(var a=e.length,n=0,s=0;a>s;s++)e[s]!=e[s+1]&&(i[n]=e[s],n++);return i},$:function(e,t,a){var n,s=e||i;if(2==arguments.length?(a=t,n="*"):n=t||"*",i.getElementsByClassName)return s.getElementsByClassName(a);for(var r=[],o=s.getElementsByTagName(n),c=o.length,l=c;l--;){var d=o[l];if(d.className)for(var p=d.className.replace(/\s/g,"|").split("|"),h=p.length,m=h;m--;)if(p[m]==a){r.push(d);break}}return r},importFile:function(e,t){var a,n,s=i.getElementsByTagName("head")[0]||i.documentElement;switch(e){case"js":n=i.createElement("script"),n.async="async",n.charset="utf-8",n.type="text/javascript",n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onload=n.onreadystatechange=null,s&&n.parentNode&&s.removeChild(n))},n.src=t,s.appendChild(n);break;case"css":a=i.createElement("link"),a.type="text/css",a.rel="stylesheet",a.href=t,s.appendChild(a)}},hasClass:function(e,t){if(e.className)for(var i=e.className.split(" "),a=0,n=i.length;n>a;a++)if(t===i[a])return!0;return!1},isVisible:function(t){if(t==i)return!0;if(!t)return!1;if(!t.parentNode)return!1;if(t.style){if("none"==t.style.display)return!1;if("hidden"==t.style.visibility)return!1}var a=null;if(e.getComputedStyle){if(a=e.getComputedStyle(t,""),"none"==a.display)return!1;if("hidden"==a.visibility)return!1}if(a=t.currentStyle){if("none"==a.display)return!1;if("hidden"==a.visibility)return!1}return u.isVisible(t.parentNode)}},f=function(e,t){if(e)if(e.length)for(var i=0,a=e.length;a>i;i++)t.call(e[i],i);else e&&t.call(e,0)},g=function(e){f(e,function(){this.style.display="none"})},v=function(e){f(e,function(){this.style.display="block"})},w=function(e,t){if(e)if("object"==typeof e)for(var i in e)t[i]=e[i];else"function"==typeof e&&(t[e]=e)},y=[],b=!1,I=/^(loaded|complete)$/,x=function(){if(!b){for(var e=0;y.length>e;e++)y[e]&&y[e].call(i);b=!0,y=null}},k=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",k,!1),x()):I.test(i.readyState)&&(i.detachEvent("onreadystatechange",k),x())},A=function(t){return"complete"===i.readyState?(x(),undefined):(y.push(t)>1||(i.addEventListener?(i.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("loaded",x,!1)):i.attachEvent&&(i.attachEvent("onreadystatechange",k),e.attachEvent("onload",x))),undefined)},S={get:function(e,t){var a;return"float"==t&&(t=i.defaultView?"cssFloat":"styleFloat"),"opacity"==t&&(t=i.defaultView?"opacity":"filter"),i.defaultView&&i.defaultView.getComputedStyle?a=i.defaultView.getComputedStyle(e,null)[t]:e.currentStyle&&(a=e.currentStyle[t],"filter"==t&&(a.match("alpha")?a=parseFloat(a.match(/\d+/)[0])/100:a||(a=1))),"string"==typeof a&&a.match("px")?a=parseInt(a.replace("px",""),10):a,"opacity"==t?a=parseInt(a,10):a,a},set:function(e,t,a){"float"==t&&(t=i.defaultView?"cssFloat":"styleFloat"),"opacity"==t&&(e.style.filter="alpha(opacity="+100*a+")",e.style.zoom=1),e.style[t]=a}},T=function(){var e,t=[],i=function(e){for(var t in e)return!1;return!0},a=function(e,t,s,r,o){var c=a.getOpt(s,r,o);if(e&&1==e.nodeType){var l;if(t&&"object"==typeof t)if(i(t))o.call(e);else for(var d in t){var p=new n(e,c,d);l=S.get(e,d),end=parseFloat(t[d]),p.custom(l,end)}}};a.getOpt=function(e,t,i){var a={duration:e||200,easing:t||"linear"};return a.callback=function(){i&&i()},a},a.stop=function(e,i){i=i||!1;for(var a=t.length;a--;){var n=t[a];n.elem===e&&(i&&n.update(n.name,n.end),t.splice(a,1))}};var n=function(e,t,i){this.elem=e,this.options=t,this.name=i};n.prototype.custom=function(e,i){this.startTime=(new Date).getTime(),this.start=e,this.end=i,t.push(this),n.tick()},n.prototype.step=function(){var e,t=(new Date).getTime();if(t>this.options.duration+this.startTime)e=this.end,this.options.callback.call(this.elem),this.stop();else{var i=t-this.startTime,a=i/this.options.duration,n=s[this.options.easing](a,0,1,this.options.duration);e=this.start+(this.end-this.start)*n}this.update(this.name,e)},n.prototype.stop=function(){for(var e=t.length;e--;)t[e]===this&&t.splice(e,1)},n.prototype.update=function(e,t){"opacity"!=e&&(t+="px"),S.set(this.elem,e,t)},n.tick=function(){e||(e=setInterval(function(){for(var e=0,i=t.length;i>e;e++)t[e]&&t[e].step();t.length||n.stop()},13))},n.stop=function(){clearInterval(e),e=null};var s={linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}};return a}(),N=function(){var e=null;return function(t){e=setInterval(function(){for(var e=0;t.length>e;e++)t[e]&&t[e].detect()},500)}}(),C={adsArray:[],requestAd:function(){for(var e=i.getElementsByTagName("img"),t=0,a=e.length;a>t;t++){var n=e[t];s[t]=n,n.insId=t,n.setAttribute("instreet_img_id",t),C.onImgLoad(n)}},onImgLoad:function(e){var t=new Image;t.src=e.src,t.insId=e.insId,t.complete?C.loadData(t):t.onload=function(){var e=this;e.onload=null,C.loadData(t)}},loadData:function(e){var t=e.insId,i=s[t];if(e.width>=m.imiw&&e.height>=m.imih&&(i.clientWidth>=m.imiw&&i.clientHeight>=m.imih||0===i.clientWidth&&0===i.clientHeight)){if("number"==typeof m.adsLimit&&0>=m.adsLimit)return;i.setAttribute("instreet_data_loading",!0),i.insDataLoading=!0,E.recordImage(i),C.createJsonp(i),m.adsLimit&&m.adsLimit--}},createJsonp:function(e){var t=m.width||250,i=m.height||250,a=encodeURIComponent(encodeURIComponent(e.src)),n=m.callbackurl+"?index="+e.insId+"&pd="+m.widgetSid+"&iu="+a+"&callback=insjsonp"+"&w="+t+"&h="+i;u.importFile("js",n)}},E=function(e,t){var i=s[e.index];this.data=e,this.container=t,this.img=i,this.originInfo={width:i.clientWidth,height:i.clientHeight,src:i.src,pos:u.getXY(i)},this.spotsArray=[],this.timerId=null,this.init()};w({constructor:E,isFirstApp:!0,init:function(){var e=this;e.createApps(),e.locate(),e.bindEvents()},createApps:function(){var e=this,t=i.createElement("div"),a=i.createElement("ul"),n=i.createElement("ul");"0"==m.position?t.className="in-ad-wrapper in-position-right":"1"==m.position&&(t.className="in-ad-wrapper in-position-left"),m.color&&(t.className+=" in-"+m.color+"style"),m.width&&(t.className+=" in-size"+m.width),a.className="in-tabs-wrapper",n.className="in-contents-wrapper",n.style.width="0";var s=i.createDocumentFragment(),r=i.createDocumentFragment();"2thwQrIEQvQz9mNHUQvr0c"==m.widgetSid&&(p[0]="shopApp",p[1]="adApp");for(var o=0,c=p.length;c>o;o++){var l=p[o];if("function"==typeof E.apps[l]){var d=E.apps[l](e);d&&(d.tab&&s.appendChild(d.tab),d.cont&&r.appendChild(d.cont))}}a.appendChild(s),n.appendChild(r),t.appendChild(a),t.appendChild(n),e.container.appendChild(t),e.adWrapper=t,e.tabs=a,e.contents=n},createSpot:function(e,t){var a=e.width,n=e.metrix,s=i.createElement("a"),r=c;s.href="javascript:;",s.index=t,s.target="_self",s.metrix=n,s.imgWidth=a,e.adsType?s.className="instreet-shopSpot":"1"==""+e.type||"2"==""+e.type?s.className="instreet-weiboSpot":"4"==""+e.type&&(s.className="instreet-wikiSpot"),this.spotsArray.push(s),r.appendChild(s)},locate:function(){function e(e){n?(t.tabs.style.styleFloat=e,t.contents.style.styleFloat=e):(t.tabs.style.cssFloat=e,t.contents.style.cssFloat=e)}var t=this,a=t.img,s=u.getXY(a),r=a.offsetWidth,o=s.x+r+"px",c=Math.max(i.body.clientWidth,i.documentElement.clientWidth)-s.x+"px",l=s.y+"px",d=t.spotsArray,p=t.isSlideLeft(),h=u.isVisible(a)&&a.clientWidth>=m.imiw&&a.clientHeight>=m.imih?"block":"none";if("0"==m.position?p?(e("right"),t.contents.className="in-contents-wrapper in-contents-slideleft",t.adWrapper.style.left="auto",t.adWrapper.style.right=Math.max(i.body.clientWidth,i.documentElement.clientWidth)-s.x-r-26+"px"):(e("left"),t.contents.className="in-contents-wrapper",t.adWrapper.style.right="auto",t.adWrapper.style.left=o):1==m.position&&(p?(e("right"),t.contents.className="in-contents-wrapper",t.adWrapper.style.right=c,t.adWrapper.style.left="auto"):(e("left"),t.contents.className="in-contents-wrapper in-contents-slideright",t.adWrapper.style.left=s.x-26+"px",t.adWrapper.style.right="auto")),t.adWrapper.style.top=l,t.adWrapper.style.display=h,"block"==h&&m.footAuto&&t.isFirst!==!1&&(t.isFirst=!1,t.showApp(),t.recordShow(9)),d.length>0)for(var f=d[0].imgWidth,g=a.width/f,v=15,w=d.length;w--;){var y=d[w],b=y.metrix,I=b%3e3,x=Math.round(b/3e3),k=I*g,A=x*g;y.style.cssText="top:"+(A+s.y-v)+"px;left:"+(k+s.x-v)+"px;display:"+h}},bindEvents:function(){var e=this,t=e.tabs.children,i=e.contents.children,a=null,n=null,s=null;e.bindImgEvents(e.img),e.tabs.onmouseover=function(){clearTimeout(e.timerId)},e.tabs.onmouseout=function(){e.timerId=setTimeout(function(){e.closeApp()},m.timer)},e.contents.onmouseover=function(){clearTimeout(e.timerId)},e.contents.onmouseout=function(){e.timerId=setTimeout(function(){e.closeApp()},m.timer)},e.contents.onclick=function(t){var i=u.getEvent(t),a=u.getTarget(i);"in-close"==a.className?(e.closeApp(),("0"==m.position&&e.isLeft||1==m.position&&!e.isLeft)&&(e.notopen=!0)):"in-share-icons"==a.parentNode.className&&e.shareImg(a),u.stopPropagation(i)};var r=u.$(e.contents,null,"in-shop-selector")[0];r&&f(r.children,function(e){var t=this;t.onclick=function(){E.chooseItem(this,e)}});var o=u.$(e.contents,null,"in-weibo-selector")[0];o&&f(o.children,function(e){var t=this;t.onclick=function(){E.chooseItem(this,e)}});var c=u.$(e.contents,null,"in-wiki-selector")[0];c&&f(c.children,function(e){var t=this;t.onclick=function(){E.chooseItem(this,e)}});for(var l=function(){if(!this.className.match(" focus")){var t=this.lastChild.className;e.showApp(this),("ad"==t||"shop"==t)&&e.recordShow(9)}},d=function(t){var i=u.getEvent(t),a=u.getRelatedTarget(i);v(this),this.contains(a)||e.recordWatch(this)},p=0,h=t.length;h>p;p++)a=t[p],n=i[p],a.onmouseover=l,n.onmouseover=d;for(var g=function(){switch(clearTimeout(e.timerId),this.className){case"instreet-shopSpot":var t;a=u.$(e.tabs,null,"shop")[0].parentNode,s=u.$(e.contents,null,"in-shop-selector")[0].children[this.index],t=s?s.className.match(" focus"):a.className.match(" focus"),s&&E.chooseItem(s,this.index),e.showApp(a),t||e.recordShow(9);break;case"instreet-weiboSpot":a=u.$(e.tabs,null,"weibo")[0].parentNode,s=u.$(e.contents,null,"in-weibo-selector")[0].children[this.index],s&&E.chooseItem(s,this.index),e.showApp(a);break;case"instreet-wikiSpot":a=u.$(e.tabs,null,"wiki")[0].parentNode,s=u.$(e.contents,null,"in-wiki-selector")[0].children[this.index],s&&E.chooseItem(s,this.index),e.showApp(a)}},w=0,y=e.spotsArray.length;y>w;w++){var b=e.spotsArray[w];b.onmouseover=g}},bindImgEvents:function(e){for(var t,a,n=this,s=0,r=function(e){var n=i.getElementById(e.containerId)||i,s=u.$(n,e.leftClass)[0],r=u.$(n,e.rightClass)[0];s&&r&&(e.leftTitle&&e.leftTitle!=s.title||e.rightTitle&&e.rightTitle!=r.title||(t=s,a=r))};d.length>s;s++){var o=d[s];o.widgetSid!=m.widgetSid||r(o)}var c=function(){clearTimeout(n.timerId),n.notopen||0===n.contents.offsetWidth&&(n.showApp(),n.recordShow(10))},l=function(){clearTimeout(n.timerId),n.timerId=setTimeout(function(){n.closeApp()},m.timer),n.notopen=!1};u.bind(e,"mouseover",c),t&&u.bind(t,"mouseover",c),t&&u.bind(t,"mouseout",l),u.bind(e,"mouseout",l),a&&u.bind(a,"mouseover",c),a&&u.bind(a,"mouseout",l)},hideApps:function(){for(var e=this,t=e.tabs.children,i=t.length;i--;)t[i].className.match("focus")&&(t[i].className=t[i].className.replace(" focus",""));n?g(e.contents.children):f(e.contents.children,function(){this.style.cssText="display:block;visibility:hidden;height:0;overflow:hidden;"}),"auto"!=e.adWrapper.style.width&&(e.adWrapper.style.width="auto")},closeApp:function(){this.hideApps(),this.contents.style.width=0},showApp:function(e){var t,i,a=this,s=a.tabs.children;0!==s.length&&(e||(e=s[0]),t=e.lastChild.className,a.hideApps(),"auto"==a.adWrapper.style.width&&(a.adWrapper.style.width=m.width+42+"px"),e.className+=" focus",n?v(u.$(a.contents,"li",t)):f(u.$(a.contents,"li",t),function(){this.style.cssText="display:block;visibility:visible;height:auto;"}),i=m.width+16+"px",0===S.get(a.contents,"width")&&T(a.contents,{width:i},200,"linear"))},getSelectedIndex:function(e){for(var t="in-"+e+"-selector",i=u.$(this.contents,null,t)[0]?u.$(this.contents,null,t)[0].children:[],a=0,n=i.length;n>a;a++)if(i[a].className.match(" focus"))return a;return 0},shareImg:function(t){var n=this,s=encodeURIComponent(n.img.src),r=t.className.replace("-ico",""),o=n.data.widgetSid,c=(new Date).getTime(),l=encodeURIComponent(i.title),d=encodeURIComponent(a.href),p=m.surl+"?content=''&imgUrl="+encodeURIComponent(s)+"&widgetSid="+o+"&pageUrl="+encodeURIComponent(a.href)+"&shareTo="+r+"&time="+c,h="toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=580, height=500";switch(t.className){case"sina-ico":e.open("http://v.t.sina.com.cn/share/share.php?title="+l+"&url="+d+"&pic="+s,"_blank",h);break;case"renren-ico":e.open("http://share.renren.com/share/buttonshare.do?link="+d,"_blank",h);break;case"tx-ico":e.open("http://share.v.t.qq.com/index.php?c=share&a=index&title="+l+"&url="+d+"&pic="+s,"_blank",h);break;case"qzone-ico":e.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?showcount=1&url="+d+"&title="+l+"&pics="+s+"&summary=","_blank",h);break;case"sohu-ico":e.open("http://t.sohu.com/third/post.jsp?url="+d+"&title="+l+"&content=&pic="+s,"_blank",h);break;case"kaixin-ico":e.open("http://www.kaixin001.com/login/open_login.php?flag=1&url="+d+"&pic="+s+"&content="+l,"_blank",h);break;case"wangyi-ico":e.open("http://t.163.com/article/user/checkLogin.do?link="+a.host+"source=&info="+l+d+"&images="+s,"_blank",h);break;case"douban-ico":e.open("http://shuo.douban.com/!service/share?image="+s+"&href="+d+"&name="+l,"_blank",h)}u.importFile("js",p)},isSlideLeft:function(){var e=this.img,t=u.getXY(e),a=m.width+42;return"0"==m.position?this.isLeft=1==m.outPosition?!0:2==m.outPosition?!1:t.x+e.offsetWidth+a>Math.max(i.body.clientWidth,i.documentElement.clientWidth)?!0:!1:1==m.position&&(this.isLeft=1==m.outPosition?!1:2==m.outPosition?!0:t.x>=a?!0:!1),this.isLeft},detect:function(){var e=this,t=e.img,a=e.originInfo,n=(e.adWrapper,u.getXY(t));if(0>=t.clientWidth||0>=t.clientHeight)for(var s=i.images,o=s.length;o--;)if(s[o].src==t.src&&s[o].clientWidth>=m.imiw&&s[o].clientHeight>=m.imih&&t.insId==s[o].getAttribute("instreet_img_id")){s[o].insId=t.insId,e.img=s[o],a.pos=n,e.bindImgEvents(e.img),e.locate();break}t.src&&t.src!=a.src?(U(t.insId),r=!0,a.src=t.src,"number"==typeof m.adsLimit&&m.adsLimit++,C.onImgLoad(t)):(n.x!==a.pos.x||n.y!==a.pos.y||t.clientWidth!=a.width||t.clientHeight!=a.height)&&(a.pos=n,a.width=t.clientWidth,a.height=t.clientHeight,e.locate())}},E.prototype),E.createTab=function(e,t,a){var n=i.createElement("li");return n.className="clearfix tab",n.className+=a?" "+a:"",n.innerHTML="<a class='"+e+"' href='javascript:;' target='_self'><span></span><em>"+t+"</em></a>",n},E.chooseItem=function(e,t){if(!e.className.match(" focus")){var i=e.parentNode,a=i.previousSibling,n=u.$(a,null,"focus")[0],s=u.$(i,null,"focus")[0],r=a.children[t];n.className=n.className.replace(" focus",""),s.className=s.className.replace(" focus",""),r.className+=" focus",e.className+=" focus"}},E.reLocate=function(){var e=C.adsArray;for(var t in e){var i=e[t];i.locate&&i.locate()}},E.prototype.recordShow=function(e){var t=this,i=t.data,a=t.img,n=m.iurl,s=i.widgetSid,r=i.imageUrlHash,o=encodeURIComponent(encodeURIComponent(a.src)),c=u.$(t.tabs,null,"focus")[0],l="",d="",p=0,h="",f=(new Date).getTime();if(c)if("ad"==c.lastChild.className){var g=i.badsSpot[0];l=g.adsId,d=g.adsType,g.adViewMonitorUrl&&u.importFile("js",g.adViewMonitorUrl+"?time="+f)}else"shop"==c.lastChild.className&&(p=t.getSelectedIndex("shop"),l=i.adsSpot[p].adsId,d=i.adsSpot[p].adsType,h=i.adsSpot[p].metrix);n+="?pd="+s+"&mx="+h+"&muh="+r+"&iu="+o+"&ad="+l+"&at="+d+"&flag="+e+"&time="+f,u.importFile("js",n)},E.prototype.recordWatch=function(e){var t=this,i=t.data,a=t.img,n=encodeURIComponent(encodeURIComponent(a.src)),s=i.widgetSid,r=m.murl,o=(i.imageNumId||"",i.imageUrlHash),c="",l="",d=0,p=1,h="",f=e.className,g=t.getSelectedIndex(f);if("shop"==f)c=i.adsSpot[g].adsId,l=i.adsSpot[g].adsType,h=i.adsSpot[g].metrix,p=0;else if("weibo"==f)d=2,h=i.weiboSpot[g].metrix||"";else if("wiki"==f)d=4,h=i.wikiSpot[g].metrix||"";else if("weather"==f)d=7;else if("news"==f)d=5;else{if("ad"!=f)return;c=i.badsSpot[0].adsId,l=i.badsSpot[0].adsType,p=0}var v=(new Date).getTime();r+="?iu="+n+"&mx="+h+"&pd="+s+"&muh="+o+"&ad="+c+"&at="+l+"&tty="+p+"&ift="+d+"&time="+v,u.importFile("js",r)},E.recordImage=function(t){var a=encodeURIComponent(encodeURIComponent(t.src)),n=m.widgetSid,s=(encodeURIComponent(encodeURIComponent(e.location.href)),encodeURIComponent(encodeURIComponent(i.title))),r=m.ourl,o=(new Date).getTime();r+="?iu="+a+"&pd="+n+"&t="+s+"&time="+o,u.importFile("js",r)},E.apps={adApp:function(e){if(m.showFootAd&&0!==e.data.badsSpot.length){var t,a,n,s,r,o=m.width;if(e.isFirstApp?(t=E.createTab("ad","推广","first"),e.isFirstApp=!1):t=E.createTab("ad","推广"),n=e.data,s=n.badsSpot[0],a=i.createElement("li"),a.className="ad",s.adClickMonitorUrl){var c=s.adClickMonitorUrl+encodeURIComponent(s.adsLinkUrl||"");r=m.redurl+"?tty=0&mx=&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift=&at="+(s.adsType||"")+"&ad="+(s.adsId||"")+"&rurl="+encodeURIComponent(encodeURIComponent(c))}else r=m.redurl+"?tty=0&mx=&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift=&at="+(s.adsType||"")+"&ad="+(s.adsId||"")+"&rurl="+encodeURIComponent(encodeURIComponent(s.adsLinkUrl||""));return str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>产品推广</h3><div class="main-cont">',3==s.adsType?str+="<a class='large-image' target='_blank' href='"+r+"'><img src='"+s.adsPicUrl+"' alt=''/></a>":9==s.adsType?(str+='<object id="afg-adloader" width="'+o+'" height="'+o+'"  align="middle" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000">',str+='<param value="always" name="allowScriptAccess"/><param value="'+s.adsPicUrl+'" name="movie"/><param value="high" name="quality"/><param value="opaque" name="wmode"/><param value="high" name="quality"><param value="#F1F1F1" name="bgcolor"/>',str+='<embed width="'+o+'" height="'+o+'" align="middle" pluginspage="http://www.adobe.com/go/getflashplayer"  type="application/x-shockwave-flash" allowscriptaccess="always" wmode="opaque"  bgcolor="#F1F1F1" quality="high" src="'+s.adsPicUrl+'"></object>',str+='<a class="flash-cover" href="'+r+'" target="_blank"></a>'):!s.adsLinkUrl&&s.description&&(str+='<iframe src="'+s.description+'" scrolling="no" height="'+m.height+'" width="'+m.width+'" frameborder="0" border="0" marginwidth="0" marginheight="0"></iframe>'),str+="</div>",a.innerHTML=str,{tab:t,cont:a}}},shopApp:function(e){if(m.showAd&&0!==e.data.adsSpot.length){var t,a,n,s,r,o,c,l,d,p,h='<div class="in-shop-selector">';e.isFirstApp?(t=E.createTab("shop","折扣","first"),e.isFirstApp=!1):t=E.createTab("shop","折扣"),s=e.data,a=i.createElement("li"),a.className="shop",n='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>品牌折扣</h3><div class="main-cont">',n+='<div class="in-slider-container">';for(var u=0,f=s.adsSpot.length;f>u;u++)p=0===u?" focus":"",r=s.adsSpot[u],e.createSpot(r,u),o=m.redurl+"?tty=0&mx="+r.metrix+"&muh="+s.imageUrlHash+"&pd="+r.widgetSid+"&ift=&at="+r.adsType+"&ad="+r.adsId+"&rurl="+encodeURIComponent(encodeURIComponent(r.adsLinkUrl)),l=r.adsTitle,d=r.adsDiscount||r.adsPrice,c=r.adsPicUrl.replace("160x160",m.width+"x"+m.width),n+='<a target="_blank" class="pro-box'+p+'" href="'+o+'"><img class="ins-shop-image" src="'+c+'"/><span class="pro-info"><span class="pro-name">'+l+'</span><span class="pro-tobuy"><em>进入商店</em></span><span class="pro-price">¥'+d+"</span></span></a>",f>1&&(h+='<a href="javascript:;" target="_self" class="select-item'+p+'"></a>');return n+="</div>"+h+"</div></div>",a.innerHTML=n,{tab:t,cont:a}}},weiboApp:function(e){if(m.showWeibo&&0!==e.data.weiboSpot.length){var t,a,n,s,r,o,c,l,d="",p="",h='<div class="in-weibo-selector">';e.isFirstApp?(t=E.createTab("weibo","微博","first"),e.isFirstApp=!1):t=E.createTab("weibo","微博"),n=e.data,a=i.createElement("li"),a.className="weibo",d='<h3 class="title clearfix"><a title="关闭" href="javascript:;" class="in-close">×</a>相关微博</h3><div class="main-cont">',d+='<div class="in-slider-container">';for(var u=0,f=n.weiboSpot.length;f>u;u++)p=0===u?" focus":"",s=n.weiboSpot[u],e.createSpot(s,u),l=s.avatar,icon=s.icon,r=s.title,c=s.latestStatus,o=m.redurl+"?tty=1&mx="+s.metrix+"&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift="+s.type+"&at=&ad=&rurl="+encodeURIComponent(encodeURIComponent(s.userUrl)),d+='<div class="weibo-item'+p+'"><div class="left"><a href="'+o+'" target="_blank" title="'+r+'"><img src="'+l+'"/></a></div><div class="right"><h3><a href="'+o+'" target="_blank">'+r+'</a></h3><p><em class="arrow-one"></em><em class="arrow-two"></em>'+c+'</p><div class="icon-section"><a href="'+o+'" target="_blank"><img src="'+icon+'"/></a></div></div></div>',f>1&&(h+='<a href="javascript:;" class="select-item'+p+'"></a>');return d+="</div>"+h+"</div></div>",a.innerHTML=d,{tab:t,cont:a}}},wikiApp:function(e){if(m.showWiki&&0!==e.data.wikiSpot.length){var t,a,n,s,r,o,c,l,d="",p="",h='<div class="in-wiki-selector">';e.isFirstApp?(t=E.createTab("wiki","百科","first"),e.isFirstApp=!1):t=E.createTab("wiki","百科"),n=e.data,a=i.createElement("li"),a.className="wiki",d='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>相关百科</h3><div class="main-cont">',d+='<div class="in-slider-container">';for(var u=0,f=n.wikiSpot.length;f>u;u++)p=0===u?" focus":"",s=n.wikiSpot[u],e.createSpot(s,u),l=s.firstimg,r=s.title,c=s.summary,o=m.redurl+"?tty=1&mx="+s.metrix+"&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift="+s.type+"&at=&tg="+encodeURIComponent(encodeURIComponent(r))+"&rurl="+encodeURIComponent(encodeURIComponent(s.url)),d+='<div class="wiki-item'+p+'"><div class="left"><a class="thumb" href="'+o+'" target="_blank" title="'+r+'"><img src="'+l+'"/></a><h3><a class="tagName" href="'+o+'" target="_blank">'+r+'</a></h3></div><div class="right"><p><em class="arrow-one"></em><em class="arrow-two"></em>'+c+'</p><div class="icon-section"><a href="'+o+'" target="_blank"><img src="http://static.instreet.cn/widgets/push/images/icon_baike.png"/></a></div></div></div>',f>1&&(h+='<a href="javascript:;" target="_self" class="select-item'+p+'"></a>');return d+="</div>"+h+"</div></div>",a.innerHTML=d,{tab:t,cont:a}}},shareApp:function(e){if(m.showShareButton){var t,a;return e.isFirstApp?(t=E.createTab("share","分享","first"),e.isFirstApp=!1):t=E.createTab("share","分享"),a=i.createElement("li"),a.className="share",str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>图片分享</h3><div class="main-cont">',str+='<div class="in-share-icons"><a title="新浪微博" class="sina-ico" href="javascript:;" target="_self"></a><a title="腾讯微博" class="tx-ico" href="javascript:;" target="_self"></a><a title="QQ空间" class="qzone-ico" href="javascript:;" target="_self"></a><a title="人人网" class="renren-ico" href="javascript:;" target="_self"></a><a title="搜狐微博" class="sohu-ico" href="javascript:;" target="_self"></a><a title="网易微博" class="wangyi-ico" href="javascript:;" target="_self"></a><a title="豆瓣" class="douban-ico" href="javascript:;" target="_self"></a><a title="开心网" class="kaixin-ico" href="javascript:;" target="_self"></a>',str+="</div></div>",a.innerHTML=str,{tab:t,cont:a}}},newsApp:function(e){if(m.showNews){var t=e.data,i=m.width,a=(m.height,h+"news?size="+i+"&pd="+t.widgetSid+"&muh="+t.imageUrlHash),n={type:"news",name:"新闻",title:"热点新闻",url:a};return _(e,n)}},weatherApp:function(e){if(m.showWeather){var t="http://www.thinkpage.cn/weather/weather.aspx?uid=&cid=101010100&l=zh-CHS&p=TWC&a=1&u=C&s=1&m=0&x=1&d=3&fc=&bgc=&bc=&ti=1&in=1&li=2&ct=iframe",i={type:"weather",name:"天气",title:"天气预报",url:t,height:200};return _(e,i)}},musicApp:function(e){if(m.showMusic){var t=m.width,i=m.height,a="http://img.xiami.com/res/player/widget/multiPlayer.swf?dataUrl=http://www.xiami.com/widget/xml-dynamic/uid/5840720/id/22460975/width/"+t+"/height/"+i+"/mainColor/5695c1/backColor/457cb4/type/collect/autoplay/0",n={type:"music",name:"音乐",title:"精选音乐",url:a};return _(e,n)}},videoApp:function(e){if(m.showVideo){var t=(m.width,m.height,"http://www.tudou.com/a/hiGUpMnrqE8/&resourceId=0_04_05_99&iid=131089123/v.swf"),i={type:"video",name:"视频",title:"top视频",url:t};return _(e,i)}}};var _=function(e,t){var a,n,s=t.width||m.width,r=t.height||m.height;return e.isFirstApp?(a=E.createTab(t.type,t.name,"first"),e.isFirstApp=!1):a=E.createTab(t.type,t.name),n=i.createElement("li"),n.className=t.type,str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>'+t.title+'</h3><div class="main-cont">',str+='<iframe name="ins-'+t.type+'" src="'+t.url+'" width="'+s+'" height="'+r+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true" ></iframe>',str+="</div>",n.innerHTML=str,{tab:a,cont:n}},U=function(e){var t=C.adsArray[e];if(t&&t.adWrapper){var i=t.adWrapper,a=i.parentNode;a&&a.removeChild(i);for(var n=0,s=t.spotsArray.length;s>n;n++){var r=t.spotsArray[n].parentNode;r&&r.removeChild(t.spotsArray[n])}}},L=function(e){e=e||0;for(var t=i.getElementsByTagName("img"),a=0,n=t.length;n>a;a++){var r=t[a];-1!=r.className.indexOf("ins-shop-image")||r.insDataLoading===!0||r.getAttribute("instreet_data_loading")||r.insDataLoaded===!0||r.getAttribute("instreet_data_loaded")||(r.insId===undefined&&(r.insId=s.length),r.setAttribute("instreet_img_id",r.insId),s[r.insId]=r,C.onImgLoad(r))}5>e&&setTimeout(function(){L(++e)},1e3)};e.insjsonp=function(e){if(e){var t=e.index,i=s[t];i.insDataLoaded=!0,i.setAttribute("instreet_data_loaded",!0);var a=new E(e,o);U(t),C.adsArray[t]=a}},A(function(){t()})}})(window);