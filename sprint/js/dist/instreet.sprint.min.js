/*!2013-07-05 */
(function(t){function e(){"undefined"!=typeof instreet_config&&p(instreet_config),C.init(),T.requestAd(),h.bind(t,"load",function(){N.reLocate(),U()}),h.bind(t,"resize",function(){N.reLocate()}),A(T.adsArray)}if(!t.InstreetWidget||"object"!=typeof t.InstreetWidget){t.InstreetWidget={version:"@REVISION@",name:"InstreetImageWidget",style:"sprint"};var i=t.document,a=(t.navigator,t.location),n=(a.hostname,!!t.ActiveXObject),s=[],r=!0,o=[{widgetSid:"746YRj7kfucKZSZc3KfGo0",containerId:"picbox",leftClass:"p_left",leftTitle:"上一张",rightClass:"p_right",rightTitle:"下一张"}],c=["adApp","shopApp","weiboApp","wikiApp","newsApp","weatherApp","musicApp","videoApp","shareApp"],l="http://push.instreet.cn/",d={redurl:l+"click.action",callbackurl:l+"push.action",murl:l+"tracker.action",iurl:l+"tracker90.action",ourl:l+"loadImage.action",surl:l+"share/weiboshare",cssurl:"http://static.instreet.cn/widgets/push/css/instreet.sprint.min.css",imih:300,imiw:300,timer:1e3,width:250,height:250},p=function(t){if(t&&"object"==typeof t){for(var e in t)d[e]=t[e];"3EmILiPLqC0DXwuPwg0z72"==d.widgetSid&&(d.showMusic=!0,d.showVideo=!0)}},h={bind:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},remove:function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.datachEvent?t.datachEvent("on"+e,i):t["on"+e]=null},getEvent:function(e){return e?e:t.event},getTarget:function(t){return t.target||t.srcElement},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getRelatedTarget:function(t){return t.relatedTarget?t.relatedTarget:"mouseover"==t.type?t.fromElement:"mouseout"==t.type?t.toElement:null},getXY:function(t){var e=0,a=0;if(t.getBoundingClientRect){var n=t.getBoundingClientRect(),s=i.documentElement;e=n.left+Math.max(s.scrollLeft,i.body.scrollLeft)-s.clientLeft,a=n.top+Math.max(s.scrollTop,i.body.scrollTop)-s.clientTop}else for(;t!=i.body;e+=t.offsetLeft,a+=t.offsetTop,t=t.offsetParent);return{x:e,y:a}},aTrim:function(t){function e(t,e){return t-e}var i=[];t.sort(e);for(var a=t.length,n=0,s=0;a>s;s++)t[s]!=t[s+1]&&(i[n]=t[s],n++);return i},$:function(t,e,a){var n,s=t||i;if(2==arguments.length?(a=e,n="*"):n=e||"*",i.getElementsByClassName)return s.getElementsByClassName(a);for(var r=[],o=s.getElementsByTagName(n),c=o.length,l=c;l--;){var d=o[l];if(d.className)for(var p=d.className.replace(/\s/g,"|").split("|"),h=p.length,m=h;m--;)if(p[m]==a){r.push(d);break}}return r},importFile:function(t,e){var a,n,s=i.getElementsByTagName("head")[0]||i.documentElement;switch(t){case"js":n=i.createElement("script"),n.async="async",n.charset="utf-8",n.type="text/javascript",n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onload=n.onreadystatechange=null,s&&n.parentNode&&s.removeChild(n))},n.src=e,s.appendChild(n);break;case"css":a=i.createElement("link"),a.type="text/css",a.rel="stylesheet",a.href=e,s.appendChild(a)}},hasClass:function(t,e){if(t.className)for(var i=t.className.split(" "),a=0,n=i.length;n>a;a++)if(e===i[a])return!0;return!1},isVisible:function(e){if(e==i)return!0;if(!e)return!1;if(!e.parentNode)return!1;if(e.style){if("none"==e.style.display)return!1;if("hidden"==e.style.visibility)return!1}var a=null;if(t.getComputedStyle){if(a=t.getComputedStyle(e,""),"none"==a.display)return!1;if("hidden"==a.visibility)return!1}if(a=e.currentStyle){if("none"==a.display)return!1;if("hidden"==a.visibility)return!1}return h.isVisible(e.parentNode)}},m=function(t){return i.getElementById(t)},u=function(t,e){if(t.length)for(var i=0,a=t.length;a>i;i++)e.call(t[i],i);else t&&e.call(t,0)},f=function(t){u(t,function(){this.style.display="none"})},g=function(t){u(t,function(){this.style.display="block"})},v=[],w=!1,b=/^(loaded|complete)$/,y=function(){if(!w){for(var t=0;v.length>t;t++)v[t]&&v[t].call(i);w=!0,v=null}},I=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",I,!1),y()):b.test(i.readyState)&&(i.detachEvent("onreadystatechange",I),y())},x=function(e){return"complete"===i.readyState?(y(),undefined):(v.push(e)>1||(i.addEventListener?(i.addEventListener("DOMContentLoaded",I,!1),t.addEventListener("loaded",y,!1)):i.attachEvent&&(i.attachEvent("onreadystatechange",I),t.attachEvent("onload",y))),undefined)},k={get:function(t,e){var a;return"float"==e&&(e=i.defaultView?"cssFloat":"styleFloat"),"opacity"==e&&(e=i.defaultView?"opacity":"filter"),i.defaultView&&i.defaultView.getComputedStyle?a=i.defaultView.getComputedStyle(t,null)[e]:t.currentStyle&&(a=t.currentStyle[e],"filter"==e&&(a.match("alpha")?a=parseFloat(a.match(/\d+/)[0])/100:a||(a=1))),"string"==typeof a&&a.match("px")?a=parseInt(a.replace("px",""),10):a,"opacity"==e?a=parseInt(a,10):a,a},set:function(t,e,a){"float"==e&&(e=i.defaultView?"cssFloat":"styleFloat"),"opacity"==e&&(t.style.filter="alpha(opacity="+100*a+")",t.style.zoom=1),t.style[e]=a}},S=function(){var t,e=[],i=function(t){for(var e in t)return!1;return!0},a=function(t,e,s,r,o){var c=a.getOpt(s,r,o);if(t&&1==t.nodeType){var l;if(e&&"object"==typeof e)if(i(e))o.call(t);else for(var d in e){var p=new n(t,c,d);l=k.get(t,d),end=parseFloat(e[d]),p.custom(l,end)}}};a.getOpt=function(t,e,i){var a={duration:t||200,easing:e||"linear"};return a.callback=function(){i&&i()},a},a.stop=function(t,i){i=i||!1;for(var a=e.length;a--;){var n=e[a];n.elem===t&&(i&&n.update(n.name,n.end),e.splice(a,1))}};var n=function(t,e,i){this.elem=t,this.options=e,this.name=i};n.prototype.custom=function(t,i){this.startTime=(new Date).getTime(),this.start=t,this.end=i,e.push(this),n.tick()},n.prototype.step=function(){var t,e=(new Date).getTime();if(e>this.options.duration+this.startTime)t=this.end,this.options.callback.call(this.elem),this.stop();else{var i=e-this.startTime,a=i/this.options.duration,n=s[this.options.easing](a,0,1,this.options.duration);t=this.start+(this.end-this.start)*n}this.update(this.name,t)},n.prototype.stop=function(){for(var t=e.length;t--;)e[t]===this&&e.splice(t,1)},n.prototype.update=function(t,e){"opacity"!=t&&(e+="px"),k.set(this.elem,t,e)},n.tick=function(){t||(t=setInterval(function(){for(var t=0,i=e.length;i>t;t++)e[t]&&e[t].step();e.length||n.stop()},13))},n.stop=function(){clearInterval(t),t=null};var s={linear:function(t){return t},swing:function(t){return-Math.cos(t*Math.PI)/2+.5}};return a}(),A=function(){var t=null;return function(e){t=setInterval(function(){for(var t=0;e.length>t;t++)e[t]&&e[t].detect()},500)}}(),T={adsArray:[],requestAd:function(){for(var t=i.getElementsByTagName("img"),e=0,a=t.length;a>e;e++){var n=t[e];s[e]=n,n.insId=e,n.setAttribute("instreet_img_id",e),T.onImgLoad(n)}},onImgLoad:function(t){var e=new Image;e.src=t.src,e.insId=t.insId,e.complete?T.loadData(e):e.onload=function(){var t=this;t.onload=null,T.loadData(e)}},loadData:function(t){var e=t.insId,i=s[e];if(t.width>=d.imiw&&t.height>=d.imih&&(i.clientWidth>=d.imiw&&i.clientHeight>=d.imih||0===i.clientWidth&&0===i.clientHeight)){if("number"==typeof d.adsLimit&&0>=d.adsLimit)return;i.setAttribute("instreet_data_loading",!0),i.insDataLoading=!0,N.recordImage(i),T.createJsonp(i),d.adsLimit&&d.adsLimit--}},createJsonp:function(t){var e=d.width||250,i=d.height||250,a=encodeURIComponent(encodeURIComponent(t.src)),n=d.callbackurl+"?index="+t.insId+"&pd="+d.widgetSid+"&iu="+a+"&callback=insjsonp"+"&w="+e+"&h="+i;h.importFile("js",n)}},C={init:function(){var t=d.cssurl;h.importFile("css",t),C.createContainer()},createContainer:function(){var t=i.createElement("div"),e=i.createElement("div");t.id="instreet-plugin-container",e.id="instreet-plugin-spotbox",C.container=t,C.spotBox=e,t.appendChild(e),i.body.children&&i.body.insertBefore(t,i.body.firstChild)}},N=function(t,e){var i=s[t.index];this.data=t,this.container=e,this.img=i,this.originInfo={width:i.clientWidth,height:i.clientHeight,src:i.src,pos:h.getXY(i)},this.spotsArray=[],this.timerId=null,this.init()};N.prototype={constructor:N,isFirstApp:!0,init:function(){var t=this;t.createApps(),t.locate(),t.bindEvents()},createApps:function(){var t=this,e=i.createElement("div"),a=i.createElement("ul"),n=i.createElement("ul");"0"==d.position?e.className="in-ad-wrapper in-position-right":"1"==d.position&&(e.className="in-ad-wrapper in-position-left"),d.color&&(e.className+=" in-"+d.color+"style"),d.width&&(e.className+=" in-size"+d.width),a.className="in-tabs-wrapper",n.className="in-contents-wrapper",n.style.width="0";var s=i.createDocumentFragment(),r=i.createDocumentFragment();"2thwQrIEQvQz9mNHUQvr0c"==d.widgetSid&&(c[0]="shopApp",c[1]="adApp");for(var o=0,l=c.length;l>o;o++){var p=c[o];if("function"==typeof N.apps[p]){var h=N.apps[p](t);h&&(h.tab&&s.appendChild(h.tab),h.cont&&r.appendChild(h.cont))}}a.appendChild(s),n.appendChild(r),e.appendChild(a),e.appendChild(n),t.container.appendChild(e),t.adWrapper=e,t.tabs=a,t.contents=n},createSpot:function(t,e){var a=t.width,n=t.metrix,s=i.createElement("a"),r=m("instreet-plugin-spotbox");s.href="javascript:;",s.index=e,s.target="_self",s.metrix=n,s.imgWidth=a,t.adsType?s.className="instreet-shopSpot":"1"==""+t.type||"2"==""+t.type?s.className="instreet-weiboSpot":"4"==""+t.type&&(s.className="instreet-wikiSpot"),this.spotsArray.push(s),r.appendChild(s)},locate:function(){function t(t){n?(e.tabs.style.styleFloat=t,e.contents.style.styleFloat=t):(e.tabs.style.cssFloat=t,e.contents.style.cssFloat=t)}var e=this,a=e.img,s=h.getXY(a),r=a.offsetWidth,o=s.x+r+"px",c=Math.max(i.body.clientWidth,i.documentElement.clientWidth)-s.x+"px",l=s.y+"px",p=e.spotsArray,m=e.isSlideLeft(),u=h.isVisible(a)&&a.clientWidth>=d.imiw&&a.clientHeight>=d.imih?"block":"none";if("0"==d.position?m?(t("right"),e.contents.className="in-contents-wrapper in-contents-slideleft",e.adWrapper.style.left="auto",e.adWrapper.style.right=Math.max(i.body.clientWidth,i.documentElement.clientWidth)-s.x-r-26+"px"):(t("left"),e.contents.className="in-contents-wrapper",e.adWrapper.style.right="auto",e.adWrapper.style.left=o):1==d.position&&(m?(t("right"),e.contents.className="in-contents-wrapper",e.adWrapper.style.right=c,e.adWrapper.style.left="auto"):(t("left"),e.contents.className="in-contents-wrapper in-contents-slideright",e.adWrapper.style.left=s.x-26+"px",e.adWrapper.style.right="auto")),e.adWrapper.style.top=l,e.adWrapper.style.display=u,"block"==u&&d.footAuto&&e.isFirst!==!1&&(e.isFirst=!1,e.showApp(),e.recordShow(9)),p.length>0)for(var f=p[0].imgWidth,g=a.width/f,v=15,w=p.length;w--;){var b=p[w],y=b.metrix,I=y%3e3,x=Math.round(y/3e3),k=I*g,S=x*g;b.style.cssText="top:"+(S+s.y-v)+"px;left:"+(k+s.x-v)+"px;display:"+u}},bindEvents:function(){var t=this,e=t.tabs.children,i=t.contents.children,a=null,n=null,s=null;t.bindImgEvents(t.img),t.tabs.onmouseover=function(){clearTimeout(t.timerId)},t.tabs.onmouseout=function(){t.timerId=setTimeout(function(){t.closeApp()},d.timer)},t.contents.onmouseover=function(){clearTimeout(t.timerId)},t.contents.onmouseout=function(){t.timerId=setTimeout(function(){t.closeApp()},d.timer)},t.contents.onclick=function(e){var i=h.getEvent(e),a=h.getTarget(i);"in-close"==a.className?(t.closeApp(),("0"==d.position&&t.isLeft||1==d.position&&!t.isLeft)&&(t.notopen=!0)):"in-share-icons"==a.parentNode.className&&t.shareImg(a),h.stopPropagation(i)};var r=h.$(t.contents,null,"in-shop-selector")[0];r&&u(r.children,function(t){var e=this;e.onclick=function(){N.chooseItem(this,t)}});var o=h.$(t.contents,null,"in-weibo-selector")[0];o&&u(o.children,function(t){var e=this;e.onclick=function(){N.chooseItem(this,t)}});var c=h.$(t.contents,null,"in-wiki-selector")[0];c&&u(c.children,function(t){var e=this;e.onclick=function(){N.chooseItem(this,t)}});for(var l=function(){if(!this.className.match(" focus")){var e=this.lastChild.className;t.showApp(this),("ad"==e||"shop"==e)&&t.recordShow(9)}},p=function(e){var i=h.getEvent(e),a=h.getRelatedTarget(i);g(this),this.contains(a)||t.recordWatch(this)},m=0,f=e.length;f>m;m++)a=e[m],n=i[m],a.onmouseover=l,n.onmouseover=p;for(var v=function(){switch(clearTimeout(t.timerId),this.className){case"instreet-shopSpot":var e;a=h.$(t.tabs,null,"shop")[0].parentNode,s=h.$(t.contents,null,"in-shop-selector")[0].children[this.index],e=s?s.className.match(" focus"):a.className.match(" focus"),s&&N.chooseItem(s,this.index),t.showApp(a),e||t.recordShow(9);break;case"instreet-weiboSpot":a=h.$(t.tabs,null,"weibo")[0].parentNode,s=h.$(t.contents,null,"in-weibo-selector")[0].children[this.index],s&&N.chooseItem(s,this.index),t.showApp(a);break;case"instreet-wikiSpot":a=h.$(t.tabs,null,"wiki")[0].parentNode,s=h.$(t.contents,null,"in-wiki-selector")[0].children[this.index],s&&N.chooseItem(s,this.index),t.showApp(a)}},w=0,b=t.spotsArray.length;b>w;w++){var y=t.spotsArray[w];y.onmouseover=v}},bindImgEvents:function(t){for(var e,a,n=this,s=0,r=function(t){var n=i.getElementById(t.containerId)||i,s=h.$(n,t.leftClass)[0],r=h.$(n,t.rightClass)[0];s&&r&&(t.leftTitle&&t.leftTitle!=s.title||t.rightTitle&&t.rightTitle!=r.title||(e=s,a=r))};o.length>s;s++){var c=o[s];c.widgetSid!=d.widgetSid||r(c)}var l=function(){clearTimeout(n.timerId),n.notopen||0===n.contents.offsetWidth&&(n.showApp(),n.recordShow(10))},p=function(){clearTimeout(n.timerId),n.timerId=setTimeout(function(){n.closeApp()},d.timer),n.notopen=!1};h.bind(t,"mouseover",l),e&&h.bind(e,"mouseover",l),e&&h.bind(e,"mouseout",p),h.bind(t,"mouseout",p),a&&h.bind(a,"mouseover",l),a&&h.bind(a,"mouseout",p)},hideApps:function(){for(var t=this,e=t.tabs.children,i=e.length;i--;)e[i].className.match("focus")&&(e[i].className=e[i].className.replace(" focus",""));n?f(t.contents.children):u(t.contents.children,function(){this.style.cssText="display:block;visibility:hidden;height:0;overflow:hidden;"}),"auto"!=t.adWrapper.style.width&&(t.adWrapper.style.width="auto")},closeApp:function(){this.hideApps(),this.contents.style.width=0},showApp:function(t){var e,i,a=this,s=a.tabs.children;0!==s.length&&(t||(t=s[0]),e=t.lastChild.className,a.hideApps(),"auto"==a.adWrapper.style.width&&(a.adWrapper.style.width=d.width+42+"px"),t.className+=" focus",n?g(h.$(a.contents,"li",e)):u(h.$(a.contents,"li",e),function(){this.style.cssText="display:block;visibility:visible;height:auto;"}),i=d.width+16+"px",0===k.get(a.contents,"width")&&S(a.contents,{width:i},200,"linear"))},getSelectedIndex:function(t){for(var e="in-"+t+"-selector",i=h.$(this.contents,null,e)[0]?h.$(this.contents,null,e)[0].children:[],a=0,n=i.length;n>a;a++)if(i[a].className.match(" focus"))return a;return 0},shareImg:function(e){var n=this,s=encodeURIComponent(n.img.src),r=e.className.replace("-ico",""),o=n.data.widgetSid,c=(new Date).getTime(),l=encodeURIComponent(i.title),p=encodeURIComponent(a.href),m=d.surl+"?content=''&imgUrl="+encodeURIComponent(s)+"&widgetSid="+o+"&pageUrl="+encodeURIComponent(a.href)+"&shareTo="+r+"&time="+c,u="toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=580, height=500";switch(e.className){case"sina-ico":t.open("http://v.t.sina.com.cn/share/share.php?title="+l+"&url="+p+"&pic="+s,"_blank",u);break;case"renren-ico":t.open("http://share.renren.com/share/buttonshare.do?link="+p,"_blank",u);break;case"tx-ico":t.open("http://share.v.t.qq.com/index.php?c=share&a=index&title="+l+"&url="+p+"&pic="+s,"_blank",u);break;case"qzone-ico":t.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?showcount=1&url="+p+"&title="+l+"&pics="+s+"&summary=","_blank",u);break;case"sohu-ico":t.open("http://t.sohu.com/third/post.jsp?url="+p+"&title="+l+"&content=&pic="+s,"_blank",u);break;case"kaixin-ico":t.open("http://www.kaixin001.com/login/open_login.php?flag=1&url="+p+"&pic="+s+"&content="+l,"_blank",u);break;case"wangyi-ico":t.open("http://t.163.com/article/user/checkLogin.do?link="+a.host+"source=&info="+l+p+"&images="+s,"_blank",u);break;case"douban-ico":t.open("http://shuo.douban.com/!service/share?image="+s+"&href="+p+"&name="+l,"_blank",u)}h.importFile("js",m)},isSlideLeft:function(){var t=this.img,e=h.getXY(t),a=d.width+42;return"0"==d.position?this.isLeft=1==d.outPosition?!0:2==d.outPosition?!1:e.x+t.offsetWidth+a>Math.max(i.body.clientWidth,i.documentElement.clientWidth)?!0:!1:1==d.position&&(this.isLeft=1==d.outPosition?!1:2==d.outPosition?!0:e.x>=a?!0:!1),this.isLeft},detect:function(){var t=this,e=t.img,a=t.originInfo,n=(t.adWrapper,h.getXY(e));if(0>=e.clientWidth||0>=e.clientHeight)for(var s=i.images,o=s.length;o--;)if(s[o].src==e.src&&s[o].clientWidth>=d.imiw&&s[o].clientHeight>=d.imih&&e.insId==s[o].getAttribute("instreet_img_id")){s[o].insId=e.insId,t.img=s[o],a.pos=n,t.bindImgEvents(t.img),t.locate();break}e.src&&e.src!=a.src?(_(e.insId),r=!0,a.src=e.src,"number"==typeof d.adsLimit&&d.adsLimit++,T.onImgLoad(e)):(n.x!==a.pos.x||n.y!==a.pos.y||e.clientWidth!=a.width||e.clientHeight!=a.height)&&(a.pos=n,a.width=e.clientWidth,a.height=e.clientHeight,t.locate())}},N.createTab=function(t,e,a){var n=i.createElement("li");return n.className="clearfix tab",n.className+=a?" "+a:"",n.innerHTML="<a class='"+t+"' href='javascript:;' target='_self'><span></span><em>"+e+"</em></a>",n},N.chooseItem=function(t,e){if(!t.className.match(" focus")){var i=t.parentNode,a=i.previousSibling,n=h.$(a,null,"focus")[0],s=h.$(i,null,"focus")[0],r=a.children[e];n.className=n.className.replace(" focus",""),s.className=s.className.replace(" focus",""),r.className+=" focus",t.className+=" focus"}},N.reLocate=function(){var t=T.adsArray;for(var e in t){var i=t[e];i.locate&&i.locate()}},N.prototype.recordShow=function(t){var e=this,i=e.data,a=e.img,n=d.iurl,s=i.widgetSid,r=i.imageUrlHash,o=encodeURIComponent(encodeURIComponent(a.src)),c=h.$(e.tabs,null,"focus")[0],l="",p="",m=0,u="",f=(new Date).getTime();if(c)if("ad"==c.lastChild.className){var g=i.badsSpot[0];l=g.adsId,p=g.adsType,g.adViewMonitorUrl&&h.importFile("js",g.adViewMonitorUrl+"?time="+f)}else"shop"==c.lastChild.className&&(m=e.getSelectedIndex("shop"),l=i.adsSpot[m].adsId,p=i.adsSpot[m].adsType,u=i.adsSpot[m].metrix);n+="?pd="+s+"&mx="+u+"&muh="+r+"&iu="+o+"&ad="+l+"&at="+p+"&flag="+t+"&time="+f,h.importFile("js",n)},N.prototype.recordWatch=function(t){var e=this,i=e.data,a=e.img,n=encodeURIComponent(encodeURIComponent(a.src)),s=i.widgetSid,r=d.murl,o=(i.imageNumId||"",i.imageUrlHash),c="",l="",p=0,m=1,u="",f=t.className,g=e.getSelectedIndex(f);if("shop"==f)c=i.adsSpot[g].adsId,l=i.adsSpot[g].adsType,u=i.adsSpot[g].metrix,m=0;else if("weibo"==f)p=2,u=i.weiboSpot[g].metrix||"";else if("wiki"==f)p=4,u=i.wikiSpot[g].metrix||"";else if("weather"==f)p=7;else if("news"==f)p=5;else{if("ad"!=f)return;c=i.badsSpot[0].adsId,l=i.badsSpot[0].adsType,m=0}var v=(new Date).getTime();r+="?iu="+n+"&mx="+u+"&pd="+s+"&muh="+o+"&ad="+c+"&at="+l+"&tty="+m+"&ift="+p+"&time="+v,h.importFile("js",r)},N.recordImage=function(e){var a=encodeURIComponent(encodeURIComponent(e.src)),n=d.widgetSid,s=(encodeURIComponent(encodeURIComponent(t.location.href)),encodeURIComponent(encodeURIComponent(i.title))),r=d.ourl,o=(new Date).getTime();r+="?iu="+a+"&pd="+n+"&t="+s+"&time="+o,h.importFile("js",r)},N.apps={adApp:function(t){if(d.showFootAd&&0!==t.data.badsSpot.length){var e,a,n,s,r,o=d.width;if(t.isFirstApp?(e=N.createTab("ad","推广","first"),t.isFirstApp=!1):e=N.createTab("ad","推广"),n=t.data,s=n.badsSpot[0],a=i.createElement("li"),a.className="ad",s.adClickMonitorUrl){var c=s.adClickMonitorUrl+encodeURIComponent(s.adsLinkUrl||"");r=d.redurl+"?tty=0&mx=&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift=&at="+(s.adsType||"")+"&ad="+(s.adsId||"")+"&rurl="+encodeURIComponent(encodeURIComponent(c))}else r=d.redurl+"?tty=0&mx=&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift=&at="+(s.adsType||"")+"&ad="+(s.adsId||"")+"&rurl="+encodeURIComponent(encodeURIComponent(s.adsLinkUrl||""));return str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>产品推广</h3><div class="main-cont">',3==s.adsType?str+="<a class='large-image' target='_blank' href='"+r+"'><img src='"+s.adsPicUrl+"' alt=''/></a>":9==s.adsType?(str+='<object id="afg-adloader" width="'+o+'" height="'+o+'"  align="middle" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000">',str+='<param value="always" name="allowScriptAccess"/><param value="'+s.adsPicUrl+'" name="movie"/><param value="high" name="quality"/><param value="opaque" name="wmode"/><param value="high" name="quality"><param value="#F1F1F1" name="bgcolor"/>',str+='<embed width="'+o+'" height="'+o+'" align="middle" pluginspage="http://www.adobe.com/go/getflashplayer"  type="application/x-shockwave-flash" allowscriptaccess="always" wmode="opaque"  bgcolor="#F1F1F1" quality="high" src="'+s.adsPicUrl+'"></object>',str+='<a class="flash-cover" href="'+r+'" target="_blank"></a>'):!s.adsLinkUrl&&s.description&&(str+='<iframe src="'+s.description+'" scrolling="no" height="'+d.height+'" width="'+d.width+'" frameborder="0" border="0" marginwidth="0" marginheight="0"></iframe>'),str+="</div>",a.innerHTML=str,{tab:e,cont:a}}},shopApp:function(t){if(d.showAd&&0!==t.data.adsSpot.length){var e,a,n,s,r,o,c,l,p,h,m='<div class="in-shop-selector">';t.isFirstApp?(e=N.createTab("shop","折扣","first"),t.isFirstApp=!1):e=N.createTab("shop","折扣"),s=t.data,a=i.createElement("li"),a.className="shop",n='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>品牌折扣</h3><div class="main-cont">',n+='<div class="in-slider-container">';for(var u=0,f=s.adsSpot.length;f>u;u++)h=0===u?" focus":"",r=s.adsSpot[u],t.createSpot(r,u),o=d.redurl+"?tty=0&mx="+r.metrix+"&muh="+s.imageUrlHash+"&pd="+r.widgetSid+"&ift=&at="+r.adsType+"&ad="+r.adsId+"&rurl="+encodeURIComponent(encodeURIComponent(r.adsLinkUrl)),l=r.adsTitle,p=r.adsDiscount||r.adsPrice,c=r.adsPicUrl.replace("160x160",d.width+"x"+d.width),n+='<a target="_blank" class="pro-box'+h+'" href="'+o+'"><img class="ins-shop-image" src="'+c+'"/><span class="pro-info"><span class="pro-name">'+l+'</span><span class="pro-tobuy"><em>进入商店</em></span><span class="pro-price">¥'+p+"</span></span></a>",f>1&&(m+='<a href="javascript:;" target="_self" class="select-item'+h+'"></a>');return n+="</div>"+m+"</div></div>",a.innerHTML=n,{tab:e,cont:a}}},weiboApp:function(t){if(d.showWeibo&&0!==t.data.weiboSpot.length){var e,a,n,s,r,o,c,l,p="",h="",m='<div class="in-weibo-selector">';t.isFirstApp?(e=N.createTab("weibo","微博","first"),t.isFirstApp=!1):e=N.createTab("weibo","微博"),n=t.data,a=i.createElement("li"),a.className="weibo",p='<h3 class="title clearfix"><a title="关闭" href="javascript:;" class="in-close">×</a>相关微博</h3><div class="main-cont">',p+='<div class="in-slider-container">';for(var u=0,f=n.weiboSpot.length;f>u;u++)h=0===u?" focus":"",s=n.weiboSpot[u],t.createSpot(s,u),l=s.avatar,icon=s.icon,r=s.title,c=s.latestStatus,o=d.redurl+"?tty=1&mx="+s.metrix+"&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift="+s.type+"&at=&ad=&rurl="+encodeURIComponent(encodeURIComponent(s.userUrl)),p+='<div class="weibo-item'+h+'"><div class="left"><a href="'+o+'" target="_blank" title="'+r+'"><img src="'+l+'"/></a></div><div class="right"><h3><a href="'+o+'" target="_blank">'+r+'</a></h3><p><em class="arrow-one"></em><em class="arrow-two"></em>'+c+'</p><div class="icon-section"><a href="'+o+'" target="_blank"><img src="'+icon+'"/></a></div></div></div>',f>1&&(m+='<a href="javascript:;" class="select-item'+h+'"></a>');return p+="</div>"+m+"</div></div>",a.innerHTML=p,{tab:e,cont:a}}},wikiApp:function(t){if(d.showWiki&&0!==t.data.wikiSpot.length){var e,a,n,s,r,o,c,l,p="",h="",m='<div class="in-wiki-selector">';t.isFirstApp?(e=N.createTab("wiki","百科","first"),t.isFirstApp=!1):e=N.createTab("wiki","百科"),n=t.data,a=i.createElement("li"),a.className="wiki",p='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>相关百科</h3><div class="main-cont">',p+='<div class="in-slider-container">';for(var u=0,f=n.wikiSpot.length;f>u;u++)h=0===u?" focus":"",s=n.wikiSpot[u],t.createSpot(s,u),l=s.firstimg,r=s.title,c=s.summary,o=d.redurl+"?tty=1&mx="+s.metrix+"&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift="+s.type+"&at=&tg="+encodeURIComponent(encodeURIComponent(r))+"&rurl="+encodeURIComponent(encodeURIComponent(s.url)),p+='<div class="wiki-item'+h+'"><div class="left"><a class="thumb" href="'+o+'" target="_blank" title="'+r+'"><img src="'+l+'"/></a><h3><a class="tagName" href="'+o+'" target="_blank">'+r+'</a></h3></div><div class="right"><p><em class="arrow-one"></em><em class="arrow-two"></em>'+c+'</p><div class="icon-section"><a href="'+o+'" target="_blank"><img src="http://static.instreet.cn/widgets/push/images/icon_baike.png"/></a></div></div></div>',f>1&&(m+='<a href="javascript:;" target="_self" class="select-item'+h+'"></a>');return p+="</div>"+m+"</div></div>",a.innerHTML=p,{tab:e,cont:a}}},shareApp:function(t){if(d.showShareButton){var e,a;return t.isFirstApp?(e=N.createTab("share","分享","first"),t.isFirstApp=!1):e=N.createTab("share","分享"),a=i.createElement("li"),a.className="share",str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>图片分享</h3><div class="main-cont">',str+='<div class="in-share-icons"><a title="新浪微博" class="sina-ico" href="javascript:;" target="_self"></a><a title="腾讯微博" class="tx-ico" href="javascript:;" target="_self"></a><a title="QQ空间" class="qzone-ico" href="javascript:;" target="_self"></a><a title="人人网" class="renren-ico" href="javascript:;" target="_self"></a><a title="搜狐微博" class="sohu-ico" href="javascript:;" target="_self"></a><a title="网易微博" class="wangyi-ico" href="javascript:;" target="_self"></a><a title="豆瓣" class="douban-ico" href="javascript:;" target="_self"></a><a title="开心网" class="kaixin-ico" href="javascript:;" target="_self"></a>',str+="</div></div>",a.innerHTML=str,{tab:e,cont:a}}},newsApp:function(t){if(d.showNews){var e=t.data,i=d.width,a=(d.height,l+"news?size="+i+"&pd="+e.widgetSid+"&muh="+e.imageUrlHash),n={type:"news",name:"新闻",title:"热点新闻",url:a};return E(t,n)}},weatherApp:function(t){if(d.showWeather){var e="http://www.thinkpage.cn/weather/weather.aspx?uid=&cid=101010100&l=zh-CHS&p=TWC&a=1&u=C&s=1&m=0&x=1&d=3&fc=&bgc=&bc=&ti=1&in=1&li=2&ct=iframe",i={type:"weather",name:"天气",title:"天气预报",url:e,height:200};return E(t,i)}},musicApp:function(t){if(d.showMusic){var e=d.width,i=d.height,a="http://img.xiami.com/res/player/widget/multiPlayer.swf?dataUrl=http://www.xiami.com/widget/xml-dynamic/uid/5840720/id/22460975/width/"+e+"/height/"+i+"/mainColor/5695c1/backColor/457cb4/type/collect/autoplay/0",n={type:"music",name:"音乐",title:"精选音乐",url:a};return E(t,n)}},videoApp:function(t){if(d.showVideo){var e=(d.width,d.height,"http://www.tudou.com/a/hiGUpMnrqE8/&resourceId=0_04_05_99&iid=131089123/v.swf"),i={type:"video",name:"视频",title:"top视频",url:e};return E(t,i)}}};var E=function(t,e){var a,n,s=e.width||d.width,r=e.height||d.height;return t.isFirstApp?(a=N.createTab(e.type,e.name,"first"),t.isFirstApp=!1):a=N.createTab(e.type,e.name),n=i.createElement("li"),n.className=e.type,str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>'+e.title+'</h3><div class="main-cont">',str+='<iframe name="ins-'+e.type+'" src="'+e.url+'" width="'+s+'" height="'+r+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true" ></iframe>',str+="</div>",n.innerHTML=str,{tab:a,cont:n}},_=function(t){var e=T.adsArray[t];if(e&&e.adWrapper){var i=e.adWrapper,a=i.parentNode;a&&a.removeChild(i);for(var n=0,s=e.spotsArray.length;s>n;n++){var r=e.spotsArray[n].parentNode;r&&r.removeChild(e.spotsArray[n])}}},U=function(t){t=t||0;for(var e=i.getElementsByTagName("img"),a=0,n=e.length;n>a;a++){var r=e[a];-1!=r.className.indexOf("ins-shop-image")||r.insDataLoading===!0||r.getAttribute("instreet_data_loading")||r.insDataLoaded===!0||r.getAttribute("instreet_data_loaded")||(r.insId===undefined&&(r.insId=s.length),r.setAttribute("instreet_img_id",r.insId),s[r.insId]=r,T.onImgLoad(r))}5>t&&setTimeout(function(){U(++t)},1e3)};t.insjsonp=function(t){if(t){var e=t.index,i=s[e];i.insDataLoaded=!0,i.setAttribute("instreet_data_loaded",!0);var a=new N(t,C.container);_(e),T.adsArray[e]=a}},x(function(){e()})}})(window);