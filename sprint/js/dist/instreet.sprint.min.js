/*!2013-07-19 15:07:51 */
(function(t){function e(){"undefined"!=typeof instreet_config&&(w(m,instreet_config),"3EmILiPLqC0DXwuPwg0z72"==m.widgetSid&&(m.showMusic=!0,m.showVideo=!0)),(r=l())&&(m.cssurl&&u.importFile("css",m.cssurl),N.requestAd(),u.bind(t,"load",function(){E.reLocate(),L()}),u.bind(t,"resize",function(){E.reLocate()}),C(N.adsArray))}if(!t.InstreetWidget||"object"!=typeof t.InstreetWidget){t.InstreetWidget={version:"@REVISION@",type:"InstreetImageWidget",name:"sprint"};var i=t.document,a=(t.navigator,t.location),n=(a.hostname,!!t.ActiveXObject),s=[],o=!0,r=null,c=null,l=function(){var t=i.createElement("div"),e=i.createElement("div");t.id="instreet-plugin-container",e.id="instreet-plugin-spotbox",t.appendChild(e),c=e;var a=i.getElementsByTagName("body")[0]||i.documentElement;return a&&a.firstChild?(a.insertBefore(t,a.firstChild),t):null},d=[{widgetSid:"746YRj7kfucKZSZc3KfGo0",containerId:"picbox",leftClass:"p_left",leftTitle:"上一张",rightClass:"p_right",rightTitle:"下一张"}],p=["adApp","shopApp","weiboApp","wikiApp","newsApp","weatherApp","musicApp","videoApp","shareApp"],h="http://push.instreet.cn/",m={redurl:h+"click.action",callbackurl:h+"push.action",murl:h+"tracker.action",iurl:h+"tracker90.action",ourl:h+"loadImage.action",surl:h+"share/weiboshare",cssurl:"http://static.instreet.cn/widgets/push/css/instreet.sprint.min.css",imih:300,imiw:300,timer:1e3,width:250,height:250},u={bind:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},remove:function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.datachEvent?t.datachEvent("on"+e,i):t["on"+e]=null},getEvent:function(e){return e?e:t.event},getTarget:function(t){return t.target||t.srcElement},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getRelatedTarget:function(t){return t.relatedTarget?t.relatedTarget:"mouseover"==t.type?t.fromElement:"mouseout"==t.type?t.toElement:null},getXY:function(t){var e=0,a=0;if(t.getBoundingClientRect){var n=t.getBoundingClientRect(),s=i.documentElement;e=n.left+Math.max(s.scrollLeft,i.body.scrollLeft)-s.clientLeft,a=n.top+Math.max(s.scrollTop,i.body.scrollTop)-s.clientTop}else for(;t!=i.body;e+=t.offsetLeft,a+=t.offsetTop,t=t.offsetParent);return{x:e,y:a}},aTrim:function(t){function e(t,e){return t-e}var i=[];t.sort(e);for(var a=t.length,n=0,s=0;a>s;s++)t[s]!=t[s+1]&&(i[n]=t[s],n++);return i},$:function(t,e,a){var n,s=t||i;if(2==arguments.length?(a=e,n="*"):n=e||"*",i.getElementsByClassName&&s.getElementsByClassName)return s.getElementsByClassName(a);for(var o=[],r=s.getElementsByTagName(n),c=r.length,l=c;l--;){var d=r[l];if(d.className)for(var p=d.className.replace(/\s/g,"|").split("|"),h=p.length,m=h;m--;)if(p[m]==a){o.push(d);break}}return o},importFile:function(t,e){var a,n,s=i.getElementsByTagName("head")[0]||i.documentElement;switch(t){case"js":n=i.createElement("script"),n.async="async",n.charset="utf-8",n.type="text/javascript",n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onload=n.onreadystatechange=null,s&&n.parentNode&&s.removeChild(n))},n.src=e,s.appendChild(n);break;case"css":a=i.createElement("link"),a.type="text/css",a.rel="stylesheet",a.href=e,s.appendChild(a)}},hasClass:function(t,e){if(t.className)for(var i=t.className.split(" "),a=0,n=i.length;n>a;a++)if(e===i[a])return!0;return!1},isVisible:function(e){if(e==i)return!0;if(!e)return!1;if(!e.parentNode)return!1;if(e.style){if("none"==e.style.display)return!1;if("hidden"==e.style.visibility)return!1}var a=null;if(t.getComputedStyle){if(a=t.getComputedStyle(e,""),"none"==a.display)return!1;if("hidden"==a.visibility)return!1}if(a=e.currentStyle){if("none"==a.display)return!1;if("hidden"==a.visibility)return!1}return u.isVisible(e.parentNode)}},f=function(t,e){if(t)if(t.length)for(var i=0,a=t.length;a>i;i++)e.call(t[i],i);else t&&e.call(t,0)},g=function(t){f(t,function(){this.style.display="none"})},v=function(t){f(t,function(){this.style.display="block"})},w=function(t,e){if(e)if("object"==typeof e)for(var i in e)t[i]=e[i];else"function"==typeof e&&(t[e]=e)},b=[],y=!1,I=/^(loaded|complete)$/,x=function(){if(!y){for(var t=0;b.length>t;t++)b[t]&&b[t].call(i);y=!0,b=null}},k=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",k,!1),x()):I.test(i.readyState)&&(i.detachEvent("onreadystatechange",k),x())},S=function(e){return"complete"===i.readyState?(x(),undefined):(b.push(e)>1||(i.addEventListener?(i.addEventListener("DOMContentLoaded",k,!1),t.addEventListener("loaded",x,!1)):i.attachEvent&&(i.attachEvent("onreadystatechange",k),t.attachEvent("onload",x))),undefined)},T={get:function(t,e){var a;return"float"==e&&(e=i.defaultView?"cssFloat":"styleFloat"),"opacity"==e&&(e=i.defaultView?"opacity":"filter"),i.defaultView&&i.defaultView.getComputedStyle?a=i.defaultView.getComputedStyle(t,null)[e]:t.currentStyle&&(a=t.currentStyle[e],"filter"==e&&(a.match("alpha")?a=parseFloat(a.match(/\d+/)[0])/100:a||(a=1))),"string"==typeof a&&a.match("px")?a=parseInt(a.replace("px",""),10):a,"opacity"==e?a=parseInt(a,10):a,a},set:function(t,e,a){"float"==e&&(e=i.defaultView?"cssFloat":"styleFloat"),"opacity"==e&&(t.style.filter="alpha(opacity="+100*a+")",t.style.zoom=1),t.style[e]=a}},A=function(){var t,e=[],i=function(t){for(var e in t)return!1;return!0},a=function(t,e,s,o,r){var c=a.getOpt(s,o,r);if(t&&1==t.nodeType){var l;if(e&&"object"==typeof e)if(i(e))r.call(t);else for(var d in e){var p=new n(t,c,d);l=T.get(t,d),end=parseFloat(e[d]),p.custom(l,end)}}};a.getOpt=function(t,e,i){var a={duration:t||200,easing:e||"linear"};return a.callback=function(){i&&i()},a},a.stop=function(t,i){i=i||!1;for(var a=e.length;a--;){var n=e[a];n.elem===t&&(i&&n.update(n.name,n.end),e.splice(a,1))}};var n=function(t,e,i){this.elem=t,this.options=e,this.name=i};n.prototype.custom=function(t,i){this.startTime=(new Date).getTime(),this.start=t,this.end=i,e.push(this),n.tick()},n.prototype.step=function(){var t,e=(new Date).getTime();if(e>this.options.duration+this.startTime)t=this.end,this.options.callback.call(this.elem),this.stop();else{var i=e-this.startTime,a=i/this.options.duration,n=s[this.options.easing](a,0,1,this.options.duration);t=this.start+(this.end-this.start)*n}this.update(this.name,t)},n.prototype.stop=function(){for(var t=e.length;t--;)e[t]===this&&e.splice(t,1)},n.prototype.update=function(t,e){"opacity"!=t&&(e+="px"),T.set(this.elem,t,e)},n.tick=function(){t||(t=setInterval(function(){for(var t=0,i=e.length;i>t;t++)e[t]&&e[t].step();e.length||n.stop()},13))},n.stop=function(){clearInterval(t),t=null};var s={linear:function(t){return t},swing:function(t){return-Math.cos(t*Math.PI)/2+.5}};return a}(),C=function(){var t=null;return function(e){t=setInterval(function(){for(var t=0;e.length>t;t++)e[t]&&e[t].detect()},500)}}(),N={adsArray:[],requestAd:function(){for(var t=i.getElementsByTagName("img"),e=0,a=t.length;a>e;e++){var n=t[e];s[e]=n,n.insId=e,n.setAttribute("instreet_img_id",e),N.onImgLoad(n)}},onImgLoad:function(t){var e=new Image;e.src=t.src,e.insId=t.insId,e.complete?N.loadData(e):e.onload=function(){var t=this;t.onload=null,N.loadData(e)}},loadData:function(t){var e=t.insId,i=s[e];if(t.width>=m.imiw&&t.height>=m.imih&&(i.clientWidth>=m.imiw&&i.clientHeight>=m.imih||0===i.clientWidth&&0===i.clientHeight)){if("number"==typeof m.adsLimit&&0>=m.adsLimit)return;i.setAttribute("instreet_data_loading",!0),i.insDataLoading=!0,E.recordImage(i),N.createJsonp(i),m.adsLimit&&m.adsLimit--}},createJsonp:function(t){var e=m.width||250,i=m.height||250,a=encodeURIComponent(encodeURIComponent(t.src)),n=m.callbackurl+"?index="+t.insId+"&pd="+m.widgetSid+"&iu="+a+"&callback=insjsonp"+"&w="+e+"&h="+i;u.importFile("js",n)}},E=function(t,e){var i=s[t.index];this.data=t,this.container=e,this.img=i,this.spotsArray=[],this.timerId=null,this.init()};w(E.prototype,{constructor:E,isFirstApp:!0,init:function(){var t=this;t.createApps(),t.locate(),t.bindEvents()},createApps:function(){var t=this,e=i.createElement("div"),a=i.createElement("ul"),n=i.createElement("ul");"0"==m.position?e.className="in-ad-wrapper in-position-right":"1"==m.position&&(e.className="in-ad-wrapper in-position-left"),m.color&&(e.className+=" in-"+m.color+"style"),m.width&&(e.className+=" in-size"+m.width),a.className="in-tabs-wrapper",n.className="in-contents-wrapper",n.style.width="0";var s=i.createDocumentFragment(),o=i.createDocumentFragment();"2thwQrIEQvQz9mNHUQvr0c"==m.widgetSid&&(p[0]="shopApp",p[1]="adApp");for(var r=0,c=p.length;c>r;r++){var l=p[r];if("function"==typeof E.apps[l]){var d=E.apps[l](t);d&&(d.tab&&s.appendChild(d.tab),d.cont&&o.appendChild(d.cont))}}a.appendChild(s),n.appendChild(o),e.appendChild(a),e.appendChild(n),t.container.appendChild(e),t.adWrapper=e,t.tabs=a,t.contents=n},createSpot:function(t,e){var a=t.width,n=t.metrix,s=i.createElement("a"),o=c;s.href="javascript:;",s.index=e,s.target="_self",s.metrix=n,s.imgWidth=a,t.adsType?s.className="instreet-shopSpot":"1"==""+t.type||"2"==""+t.type?s.className="instreet-weiboSpot":"4"==""+t.type&&(s.className="instreet-wikiSpot"),this.spotsArray.push(s),o.appendChild(s)},locate:function(){function t(t){n?(e.tabs.style.styleFloat=t,e.contents.style.styleFloat=t):(e.tabs.style.cssFloat=t,e.contents.style.cssFloat=t)}var e=this,a=e.img,s=u.getXY(a),o=a.offsetWidth,r="",c="",l=s.y+"px",d=e.spotsArray;this.originInfo={width:a.clientWidth,height:a.clientHeight,src:a.src,pos:u.getXY(a)};var p=e.isSlideLeft(),h=u.isVisible(a)&&a.clientWidth>=m.imiw&&a.clientHeight>=m.imih?"block":"none";if("0"==m.position?p?(t("right"),e.contents.className="in-contents-wrapper in-contents-slideleft",r="auto",c=Math.max(i.body.clientWidth,i.documentElement.clientWidth)-s.x-o-26+"px"):(t("left"),e.contents.className="in-contents-wrapper",c="auto",r=s.x+o+"px"):1==m.position&&(p?(t("right"),e.contents.className="in-contents-wrapper",c=Math.max(i.body.clientWidth,i.documentElement.clientWidth)-s.x+"px",r="auto"):(t("left"),e.contents.className="in-contents-wrapper in-contents-slideright",r=s.x-26+"px",c="auto")),e.adWrapper.style.cssText+=";left:"+r+";right:"+c+";top:"+l+";display:"+h,"block"==h&&m.footAuto&&e.isFirst!==!1&&(e.isFirst=!1,e.showApp(),e.recordShow(9)),d.length>0)for(var f=d[0].imgWidth,g=a.width/f,v=15,w=d.length;w--;){var b=d[w],y=b.metrix,I=y%3e3,x=Math.round(y/3e3),k=I*g,S=x*g;b.style.cssText="top:"+(S+s.y-v)+"px;left:"+(k+s.x-v)+"px;display:"+h}},bindEvents:function(){var t=this,e=t.tabs.children,i=t.contents.children,a=null,n=null,s=null;t.bindImgEvents(t.img),t.tabs.onmouseover=function(){clearTimeout(t.timerId)},t.tabs.onmouseout=function(){t.timerId=setTimeout(function(){t.closeApp()},m.timer)},t.contents.onmouseover=function(){clearTimeout(t.timerId)},t.contents.onmouseout=function(){t.timerId=setTimeout(function(){t.closeApp()},m.timer)},t.contents.onclick=function(e){var i=u.getEvent(e),a=u.getTarget(i);"in-close"==a.className?(t.closeApp(),("0"==m.position&&t.isLeft||1==m.position&&!t.isLeft)&&(t.notopen=!0)):"in-share-icons"==a.parentNode.className&&t.shareImg(a),u.stopPropagation(i)};var o=u.$(t.contents,null,"in-shop-selector")[0];o&&f(o.children,function(t){var e=this;e.onclick=function(){E.chooseItem(this,t)}});var r=u.$(t.contents,null,"in-weibo-selector")[0];r&&f(r.children,function(t){var e=this;e.onclick=function(){E.chooseItem(this,t)}});var c=u.$(t.contents,null,"in-wiki-selector")[0];c&&f(c.children,function(t){var e=this;e.onclick=function(){E.chooseItem(this,t)}});for(var l=function(){if(!this.className.match(" focus")){var e=this.lastChild.className;t.showApp(this),("ad"==e||"shop"==e)&&t.recordShow(9)}},d=function(e){var i=u.getEvent(e),a=u.getRelatedTarget(i);v(this),this.contains(a)||t.recordWatch(this)},p=0,h=e.length;h>p;p++)a=e[p],n=i[p],a.onmouseover=l,n.onmouseover=d;for(var g=function(){switch(clearTimeout(t.timerId),this.className){case"instreet-shopSpot":var e;a=u.$(t.tabs,null,"shop")[0].parentNode,s=u.$(t.contents,null,"in-shop-selector")[0].children[this.index],e=s?s.className.match(" focus"):a.className.match(" focus"),s&&E.chooseItem(s,this.index),t.showApp(a),e||t.recordShow(9);break;case"instreet-weiboSpot":a=u.$(t.tabs,null,"weibo")[0].parentNode,s=u.$(t.contents,null,"in-weibo-selector")[0].children[this.index],s&&E.chooseItem(s,this.index),t.showApp(a);break;case"instreet-wikiSpot":a=u.$(t.tabs,null,"wiki")[0].parentNode,s=u.$(t.contents,null,"in-wiki-selector")[0].children[this.index],s&&E.chooseItem(s,this.index),t.showApp(a)}},w=0,b=t.spotsArray.length;b>w;w++){var y=t.spotsArray[w];y.onmouseover=g}},bindImgEvents:function(t){for(var e,a,n=this,s=0,o=function(t){var n=i.getElementById(t.containerId)||i,s=u.$(n,t.leftClass)[0],o=u.$(n,t.rightClass)[0];s&&o&&(t.leftTitle&&t.leftTitle!=s.title||t.rightTitle&&t.rightTitle!=o.title||(e=s,a=o))};d.length>s;s++){var r=d[s];r.widgetSid!=m.widgetSid||o(r)}var c=function(){clearTimeout(n.timerId),n.notopen||0===n.contents.offsetWidth&&(n.showApp(),n.recordShow(10))},l=function(){clearTimeout(n.timerId),n.timerId=setTimeout(function(){n.closeApp()},m.timer),n.notopen=!1};u.bind(t,"mouseover",c),e&&u.bind(e,"mouseover",c),e&&u.bind(e,"mouseout",l),u.bind(t,"mouseout",l),a&&u.bind(a,"mouseover",c),a&&u.bind(a,"mouseout",l)},hideApps:function(){for(var t=this,e=t.tabs.children,i=e.length;i--;)e[i].className.match("focus")&&(e[i].className=e[i].className.replace(" focus",""));n?g(t.contents.children):f(t.contents.children,function(){this.style.cssText="display:block;visibility:hidden;height:0;overflow:hidden;"}),"auto"!=t.adWrapper.style.width&&(t.adWrapper.style.width="auto")},closeApp:function(){this.hideApps(),this.contents.style.width=0},showApp:function(t){var e,i,a=this,s=a.tabs.children;0!==s.length&&(t||(t=s[0]),e=t.lastChild.className,a.hideApps(),"auto"==a.adWrapper.style.width&&(a.adWrapper.style.width=m.width+42+"px"),t.className+=" focus",n?v(u.$(a.contents,"li",e)):f(u.$(a.contents,"li",e),function(){this.style.cssText="display:block;visibility:visible;height:auto;"}),i=m.width+16+"px",0===T.get(a.contents,"width")&&A(a.contents,{width:i},200,"linear"))},getSelectedIndex:function(t){for(var e="in-"+t+"-selector",i=u.$(this.contents,null,e)[0]?u.$(this.contents,null,e)[0].children:[],a=0,n=i.length;n>a;a++)if(i[a].className.match(" focus"))return a;return 0},shareImg:function(e){var n=this,s=encodeURIComponent(n.img.src),o=e.className.replace("-ico",""),r=n.data.widgetSid,c=(new Date).getTime(),l=encodeURIComponent(i.title),d=encodeURIComponent(a.href),p=m.surl+"?content=''&imgUrl="+encodeURIComponent(s)+"&widgetSid="+r+"&pageUrl="+encodeURIComponent(a.href)+"&shareTo="+o+"&time="+c,h="toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=580, height=500";switch(e.className){case"sina-ico":t.open("http://v.t.sina.com.cn/share/share.php?title="+l+"&url="+d+"&pic="+s,"_blank",h);break;case"renren-ico":t.open("http://share.renren.com/share/buttonshare.do?link="+d,"_blank",h);break;case"tx-ico":t.open("http://share.v.t.qq.com/index.php?c=share&a=index&title="+l+"&url="+d+"&pic="+s,"_blank",h);break;case"qzone-ico":t.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?showcount=1&url="+d+"&title="+l+"&pics="+s+"&summary=","_blank",h);break;case"sohu-ico":t.open("http://t.sohu.com/third/post.jsp?url="+d+"&title="+l+"&content=&pic="+s,"_blank",h);break;case"kaixin-ico":t.open("http://www.kaixin001.com/login/open_login.php?flag=1&url="+d+"&pic="+s+"&content="+l,"_blank",h);break;case"wangyi-ico":t.open("http://t.163.com/article/user/checkLogin.do?link="+a.host+"source=&info="+l+d+"&images="+s,"_blank",h);break;case"douban-ico":t.open("http://shuo.douban.com/!service/share?image="+s+"&href="+d+"&name="+l,"_blank",h)}u.importFile("js",p)},isSlideLeft:function(){var t=this.img,e=u.getXY(t),a=m.width+42;return"0"==m.position?this.isLeft=1==m.outPosition?!0:2==m.outPosition?!1:e.x+t.offsetWidth+a>Math.max(i.body.clientWidth,i.documentElement.clientWidth)?!0:!1:1==m.position&&(this.isLeft=1==m.outPosition?!1:2==m.outPosition?!0:e.x>=a?!0:!1),this.isLeft},detect:function(){var t=this,e=t.img,a=t.originInfo,n=(t.adWrapper,u.getXY(e));if(0>=e.clientWidth||0>=e.clientHeight)for(var s=i.images,r=s.length;r--;)if(s[r].src==e.src&&s[r].clientWidth>=m.imiw&&s[r].clientHeight>=m.imih&&e.insId==s[r].getAttribute("instreet_img_id")){s[r].insId=e.insId,t.img=s[r],a.pos=n,t.bindImgEvents(t.img),t.locate();break}e.src&&e.src!=a.src?(U(e.insId),o=!0,a.src=e.src,"number"==typeof m.adsLimit&&m.adsLimit++,N.onImgLoad(e)):(n.x!==a.pos.x||n.y!==a.pos.y||e.clientWidth!=a.width||e.clientHeight!=a.height)&&(a.pos=n,a.width=e.clientWidth,a.height=e.clientHeight,t.locate())}}),E.createTab=function(t,e,a){var n=i.createElement("li");return n.className="clearfix tab",n.className+=a?" "+a:"",n.innerHTML="<a class='"+t+"' href='javascript:;' target='_self'><span></span><em>"+e+"</em></a>",n},E.chooseItem=function(t,e){if(!t.className.match(" focus")){var i=t.parentNode,a=i.previousSibling,n=u.$(a,null,"focus")[0],s=u.$(i,null,"focus")[0],o=a.children[e];n.className=n.className.replace(" focus",""),s.className=s.className.replace(" focus",""),o.className+=" focus",t.className+=" focus"}},E.reLocate=function(){var t=N.adsArray;for(var e in t){var i=t[e];i.locate&&i.locate()}},E.prototype.recordShow=function(t){var e=this,i=e.data,a=e.img,n=m.iurl,s=i.widgetSid,o=i.imageUrlHash,r=encodeURIComponent(encodeURIComponent(a.src)),c=u.$(e.tabs,null,"focus")[0],l="",d="",p=0,h="",f=(new Date).getTime();if(c)if("ad"==c.lastChild.className){var g=i.badsSpot[0];l=g.adsId,d=g.adsType,g.adViewMonitorUrl&&u.importFile("js",g.adViewMonitorUrl+"?time="+f)}else"shop"==c.lastChild.className&&(p=e.getSelectedIndex("shop"),l=i.adsSpot[p].adsId,d=i.adsSpot[p].adsType,h=i.adsSpot[p].metrix);n+="?pd="+s+"&mx="+h+"&muh="+o+"&iu="+r+"&ad="+l+"&at="+d+"&flag="+t+"&time="+f,u.importFile("js",n)},E.prototype.recordWatch=function(t){var e=this,i=e.data,a=e.img,n=encodeURIComponent(encodeURIComponent(a.src)),s=i.widgetSid,o=m.murl,r=(i.imageNumId||"",i.imageUrlHash),c="",l="",d=0,p=1,h="",f=t.className,g=e.getSelectedIndex(f);if("shop"==f)c=i.adsSpot[g].adsId,l=i.adsSpot[g].adsType,h=i.adsSpot[g].metrix,p=0;else if("weibo"==f)d=2,h=i.weiboSpot[g].metrix||"";else if("wiki"==f)d=4,h=i.wikiSpot[g].metrix||"";else if("weather"==f)d=7;else if("news"==f)d=5;else{if("ad"!=f)return;c=i.badsSpot[0].adsId,l=i.badsSpot[0].adsType,p=0}var v=(new Date).getTime();o+="?iu="+n+"&mx="+h+"&pd="+s+"&muh="+r+"&ad="+c+"&at="+l+"&tty="+p+"&ift="+d+"&time="+v,u.importFile("js",o)},E.recordImage=function(e){var a=encodeURIComponent(encodeURIComponent(e.src)),n=m.widgetSid,s=(encodeURIComponent(encodeURIComponent(t.location.href)),encodeURIComponent(encodeURIComponent(i.title))),o=m.ourl,r=(new Date).getTime();o+="?iu="+a+"&pd="+n+"&t="+s+"&time="+r,u.importFile("js",o)},E.apps={adApp:function(t){if(m.showFootAd&&0!==t.data.badsSpot.length){var e,a,n,s,o,r=m.width;if(t.isFirstApp?(e=E.createTab("ad","推广","first"),t.isFirstApp=!1):e=E.createTab("ad","推广"),n=t.data,s=n.badsSpot[0],a=i.createElement("li"),a.className="ad",s.adClickMonitorUrl){var c=s.adClickMonitorUrl+encodeURIComponent(s.adsLinkUrl||"");o=m.redurl+"?tty=0&mx=&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift=&at="+(s.adsType||"")+"&ad="+(s.adsId||"")+"&rurl="+encodeURIComponent(encodeURIComponent(c))}else o=m.redurl+"?tty=0&mx=&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift=&at="+(s.adsType||"")+"&ad="+(s.adsId||"")+"&rurl="+encodeURIComponent(encodeURIComponent(s.adsLinkUrl||""));return str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>产品推广</h3><div class="main-cont">',3==s.adsType?str+="<a class='large-image' target='_blank' href='"+o+"'><img src='"+s.adsPicUrl+"' alt=''/></a>":9==s.adsType?(str+='<object id="afg-adloader" width="'+r+'" height="'+r+'"  align="middle" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000">',str+='<param value="always" name="allowScriptAccess"/><param value="'+s.adsPicUrl+'" name="movie"/><param value="high" name="quality"/><param value="opaque" name="wmode"/><param value="high" name="quality"><param value="#F1F1F1" name="bgcolor"/>',str+='<embed width="'+r+'" height="'+r+'" align="middle" pluginspage="http://www.adobe.com/go/getflashplayer"  type="application/x-shockwave-flash" allowscriptaccess="always" wmode="opaque"  bgcolor="#F1F1F1" quality="high" src="'+s.adsPicUrl+'"></object>',str+='<a class="flash-cover" href="'+o+'" target="_blank"></a>'):!s.adsLinkUrl&&s.description&&(str+='<iframe src="'+s.description+'" scrolling="no" height="'+m.height+'" width="'+m.width+'" frameborder="0" border="0" marginwidth="0" marginheight="0"></iframe>'),str+="</div>",a.innerHTML=str,{tab:e,cont:a}}},shopApp:function(t){if(m.showAd&&0!==t.data.adsSpot.length){var e,a,n,s,o,r,c,l,d,p,h='<div class="in-shop-selector">';t.isFirstApp?(e=E.createTab("shop","折扣","first"),t.isFirstApp=!1):e=E.createTab("shop","折扣"),s=t.data,a=i.createElement("li"),a.className="shop",n='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>品牌折扣</h3><div class="main-cont">',n+='<div class="in-slider-container">';for(var u=0,f=s.adsSpot.length;f>u;u++)p=0===u?" focus":"",o=s.adsSpot[u],t.createSpot(o,u),r=m.redurl+"?tty=0&mx="+o.metrix+"&muh="+s.imageUrlHash+"&pd="+o.widgetSid+"&ift=&at="+o.adsType+"&ad="+o.adsId+"&rurl="+encodeURIComponent(encodeURIComponent(o.adsLinkUrl)),l=o.adsTitle,d=o.adsDiscount||o.adsPrice,c=o.adsPicUrl.replace("160x160",m.width+"x"+m.width),n+='<a target="_blank" class="pro-box'+p+'" href="'+r+'"><img class="ins-shop-image" src="'+c+'"/><span class="pro-info"><span class="pro-name">'+l+'</span><span class="pro-tobuy"><em>进入商店</em></span><span class="pro-price">¥'+d+"</span></span></a>",f>1&&(h+='<a href="javascript:;" target="_self" class="select-item'+p+'"></a>');return n+="</div>"+h+"</div></div>",a.innerHTML=n,{tab:e,cont:a}}},weiboApp:function(t){if(m.showWeibo&&0!==t.data.weiboSpot.length){var e,a,n,s,o,r,c,l,d="",p="",h='<div class="in-weibo-selector">';t.isFirstApp?(e=E.createTab("weibo","微博","first"),t.isFirstApp=!1):e=E.createTab("weibo","微博"),n=t.data,a=i.createElement("li"),a.className="weibo",d='<h3 class="title clearfix"><a title="关闭" href="javascript:;" class="in-close">×</a>相关微博</h3><div class="main-cont">',d+='<div class="in-slider-container">';for(var u=0,f=n.weiboSpot.length;f>u;u++)p=0===u?" focus":"",s=n.weiboSpot[u],t.createSpot(s,u),l=s.avatar,icon=s.icon,o=s.title,c=s.latestStatus,r=m.redurl+"?tty=1&mx="+s.metrix+"&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift="+s.type+"&at=&ad=&rurl="+encodeURIComponent(encodeURIComponent(s.userUrl)),d+='<div class="weibo-item'+p+'"><div class="left"><a href="'+r+'" target="_blank" title="'+o+'"><img src="'+l+'"/></a></div><div class="right"><h3><a href="'+r+'" target="_blank">'+o+'</a></h3><p><em class="arrow-one"></em><em class="arrow-two"></em>'+c+'</p><div class="icon-section"><a href="'+r+'" target="_blank"><img src="'+icon+'"/></a></div></div></div>',f>1&&(h+='<a href="javascript:;" class="select-item'+p+'"></a>');return d+="</div>"+h+"</div></div>",a.innerHTML=d,{tab:e,cont:a}}},wikiApp:function(t){if(m.showWiki&&0!==t.data.wikiSpot.length){var e,a,n,s,o,r,c,l,d="",p="",h='<div class="in-wiki-selector">';t.isFirstApp?(e=E.createTab("wiki","百科","first"),t.isFirstApp=!1):e=E.createTab("wiki","百科"),n=t.data,a=i.createElement("li"),a.className="wiki",d='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>相关百科</h3><div class="main-cont">',d+='<div class="in-slider-container">';for(var u=0,f=n.wikiSpot.length;f>u;u++)p=0===u?" focus":"",s=n.wikiSpot[u],t.createSpot(s,u),l=s.firstimg,o=s.title,c=s.summary,r=m.redurl+"?tty=1&mx="+s.metrix+"&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift="+s.type+"&at=&tg="+encodeURIComponent(encodeURIComponent(o))+"&rurl="+encodeURIComponent(encodeURIComponent(s.url)),d+='<div class="wiki-item'+p+'"><div class="left"><a class="thumb" href="'+r+'" target="_blank" title="'+o+'"><img src="'+l+'"/></a><h3><a class="tagName" href="'+r+'" target="_blank">'+o+'</a></h3></div><div class="right"><p><em class="arrow-one"></em><em class="arrow-two"></em>'+c+'</p><div class="icon-section"><a href="'+r+'" target="_blank"><img src="http://static.instreet.cn/widgets/push/images/icon_baike.png"/></a></div></div></div>',f>1&&(h+='<a href="javascript:;" target="_self" class="select-item'+p+'"></a>');return d+="</div>"+h+"</div></div>",a.innerHTML=d,{tab:e,cont:a}}},shareApp:function(t){if(m.showShareButton){var e,a;return t.isFirstApp?(e=E.createTab("share","分享","first"),t.isFirstApp=!1):e=E.createTab("share","分享"),a=i.createElement("li"),a.className="share",str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>图片分享</h3><div class="main-cont">',str+='<div class="in-share-icons"><a title="新浪微博" class="sina-ico" href="javascript:;" target="_self"></a><a title="腾讯微博" class="tx-ico" href="javascript:;" target="_self"></a><a title="QQ空间" class="qzone-ico" href="javascript:;" target="_self"></a><a title="人人网" class="renren-ico" href="javascript:;" target="_self"></a><a title="搜狐微博" class="sohu-ico" href="javascript:;" target="_self"></a><a title="网易微博" class="wangyi-ico" href="javascript:;" target="_self"></a><a title="豆瓣" class="douban-ico" href="javascript:;" target="_self"></a><a title="开心网" class="kaixin-ico" href="javascript:;" target="_self"></a>',str+="</div></div>",a.innerHTML=str,{tab:e,cont:a}}},newsApp:function(t){if(m.showNews){var e=t.data,i=m.width,a=(m.height,h+"news?size="+i+"&pd="+e.widgetSid+"&muh="+e.imageUrlHash),n={type:"news",name:"新闻",title:"热点新闻",url:a};return _(t,n)}},weatherApp:function(t){if(m.showWeather){var e="http://www.thinkpage.cn/weather/weather.aspx?uid=&cid=101010100&l=zh-CHS&p=TWC&a=1&u=C&s=1&m=0&x=1&d=3&fc=&bgc=&bc=&ti=1&in=1&li=2&ct=iframe",i={type:"weather",name:"天气",title:"天气预报",url:e,height:200};return _(t,i)}},musicApp:function(t){if(m.showMusic){var e=m.width,i=m.height,a="http://img.xiami.com/res/player/widget/multiPlayer.swf?dataUrl=http://www.xiami.com/widget/xml-dynamic/uid/5840720/id/22460975/width/"+e+"/height/"+i+"/mainColor/5695c1/backColor/457cb4/type/collect/autoplay/0",n={type:"music",name:"音乐",title:"精选音乐",url:a};return _(t,n)}},videoApp:function(t){if(m.showVideo){var e=(m.width,m.height,"http://www.tudou.com/a/hiGUpMnrqE8/&resourceId=0_04_05_99&iid=131089123/v.swf"),i={type:"video",name:"视频",title:"top视频",url:e};return _(t,i)}}};var _=function(t,e){var a,n,s=e.width||m.width,o=e.height||m.height;return t.isFirstApp?(a=E.createTab(e.type,e.name,"first"),t.isFirstApp=!1):a=E.createTab(e.type,e.name),n=i.createElement("li"),n.className=e.type,str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>'+e.title+'</h3><div class="main-cont">',str+='<iframe name="ins-'+e.type+'" src="'+e.url+'" width="'+s+'" height="'+o+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true" ></iframe>',str+="</div>",n.innerHTML=str,{tab:a,cont:n}},U=function(t){var e=N.adsArray[t];if(e&&e.adWrapper){var i=e.adWrapper,a=i.parentNode;a&&a.removeChild(i);for(var n=0,s=e.spotsArray.length;s>n;n++){var o=e.spotsArray[n].parentNode;o&&o.removeChild(e.spotsArray[n])}}},L=function(t){t=t||0;for(var e=i.getElementsByTagName("img"),a=0,n=e.length;n>a;a++){var o=e[a];-1!=o.className.indexOf("ins-shop-image")||o.insDataLoading===!0||o.getAttribute("instreet_data_loading")||o.insDataLoaded===!0||o.getAttribute("instreet_data_loaded")||(o.insId===undefined&&(o.insId=s.length),o.setAttribute("instreet_img_id",o.insId),s[o.insId]=o,N.onImgLoad(o))}5>t&&setTimeout(function(){L(++t)},1e3)};t.insjsonp=function(t){if(t){var e=t.index,i=s[e];i.insDataLoaded=!0,i.setAttribute("instreet_data_loaded",!0);var a=new E(t,r);U(e),N.adsArray[e]=a}},S(function(){e()})}})(window);