/*!2013-07-04 */
(function(e){function t(){"undefined"!=typeof instreet_config&&W(instreet_config),C.init(),S.initData(),m.bind(e,"load",function(){U.reLocate(),E()}),m.bind(e,"resize",function(){U.reLocate()}),T(S.adsArray)}if(e.InstreetWidget!==undefined||null!=e.InstreetWidget)return null;e.InstreetWidget={version:"@REVISION@",name:"InstreetImageWidget"};var a=e.document,n=(e.navigator,e.location),s=(n.hostname,!!e.ActiveXObject),r=[],o=[],c=!0,l=["adApp","shopApp","weiboApp","wikiApp","newsApp","weatherApp","shareApp"],d=[{widgetSid:"746YRj7kfucKZSZc3KfGo0",containerId:"picbox",leftClass:"p_left",leftTitle:"上一张",rightClass:"p_right",rightTitle:"下一张"}],p="http://push.instreet.cn/",h={redurl:p+"click.action",callbackurl:p+"push.action",murl:p+"tracker.action",iurl:p+"tracker90.action",ourl:p+"loadImage.action",surl:p+"share/weiboshare",cssurl:"http://static.instreet.cn/widgets/push/css/instreet.sprint.min.css",imih:300,imiw:300,timer:1e3,width:250,height:250},m={bind:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i},remove:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.datachEvent?e.datachEvent("on"+t,i):e["on"+t]=null},getEvent:function(t){return t?t:e.event},getTarget:function(e){return e.target||e.srcElement},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getRelatedTarget:function(e){return e.relatedTarget?e.relatedTarget:"mouseover"==e.type?e.fromElement:"mouseout"==e.type?e.toElement:null},getXY:function(e){var t=0,i=0;if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),s=a.documentElement;t=n.left+Math.max(s.scrollLeft,a.body.scrollLeft)-s.clientLeft,i=n.top+Math.max(s.scrollTop,a.body.scrollTop)-s.clientTop}else for(;e!=a.body;t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent);return{x:t,y:i}},aTrim:function(e){function t(e,t){return e-t}var i=[];e.sort(t);for(var a=e.length,n=0,s=0;a>s;s++)e[s]!=e[s+1]&&(i[n]=e[s],n++);return i},$:function(e,t,i){var n,s=e||a;if(2==arguments.length)i=t,n="*";else var n=t||"*";if(a.getElementsByClassName)return s.getElementsByClassName(i);for(var r=[],o=s.getElementsByTagName(n),c=o.length,l=c;l--;){var d=o[l];if(d.className)for(var p=d.className.replace(/\s/g,"|").split("|"),h=p.length,m=h;m--;)if(p[m]==i){r.push(d);break}}return r},importFile:function(e,t){var i;switch(e){case"js":i=a.createElement("script"),i.src=t,i.charset="utf-8",i.type="text/javascript";break;case"css":i=a.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=t}var n=a.getElementsByTagName("head")[0];n.appendChild(i)},isVisible:function(t){if(t==a)return!0;if(!t)return!1;if(!t.parentNode)return!1;if(t.style){if("none"==t.style.display)return!1;if("hidden"==t.style.visibility)return!1}if(e.getComputedStyle){var i=e.getComputedStyle(t,"");if("none"==i.display)return!1;if("hidden"==i.visibility)return!1}var i=t.currentStyle;if(i){if("none"==i.display)return!1;if("hidden"==i.visibility)return!1}return m.isVisible(t.parentNode)}},u=function(e){return a.getElementById(e)},f=function(e,t){if(e.length)for(var i=0,a=e.length;a>i;i++)t.call(e[i],i);else t.call(e,0)},g=function(e){f(e,function(){this.style.display="none"})},v=function(e){f(e,function(){this.style.display="block"})},o=[],w=function(){for(var e=0;o.length>e;e++)o[e]&&o[e]()},b=function(){try{a.documentElement.doScroll("left")}catch(e){return setTimeout(b,1),undefined}w()},I=function(t){var i=!!e.ActiveXObject;if("complete"===a.readyState)return o.push(t),w(),undefined;if(!(o.push(t)>1))return a.addEventListener?a.addEventListener("DOMContentLoaded",w,!1):(i&&b(),undefined)},k={get:function(e,t){var i;if("float"==t&&(t=a.defaultView?"cssFloat":"styleFloat"),"opacity"==t&&(t=a.defaultView?"opacity":"filter"),a.defaultView&&a.defaultView.getComputedStyle)var i=a.defaultView.getComputedStyle(e,null)[t];else e.currentStyle&&(i=e.currentStyle[t],"filter"==t&&(i.match("alpha")?i=parseFloat(i.match(/\d+/)[0])/100:i||(i=1)));return"string"==typeof i&&i.match("px")?i=parseInt(i.replace("px","")):i,"opacity"==t?i=parseInt(i):i,i},set:function(e,t,i){"float"==t&&(t=a.defaultView?"cssFloat":"styleFloat"),"opacity"==t&&(e.style.filter="alpha(opacity="+100*i+")",e.style.zoom=1),e.style[t]=i}},N=function(){var e,t=[],i=function(e){for(var t in e)return!1;return!0},a=function(e,t,s,r,o){var c=a.getOpt(s,r,o);if(e&&1==e.nodeType){var l;if(t&&"object"==typeof t)if(i(t))o.call(e);else for(var d in t){var p=new n(e,c,d);l=k.get(e,d),end=parseFloat(t[d]),p.custom(l,end)}}};a.getOpt=function(e,t,i){var a={duration:e||200,easing:t||"linear"};return a.callback=function(){i&&i()},a},a.stop=function(e,i){i=i||!1;for(var a=t.length;a--;){var n=t[a];n.elem===e&&(i&&n.update(n.name,n.end),t.splice(a,1))}};var n=function(e,t,i){this.elem=e,this.options=t,this.name=i};n.prototype.custom=function(e,i){this.startTime=(new Date).getTime(),this.start=e,this.end=i,t.push(this),n.tick()},n.prototype.step=function(){var e,t=(new Date).getTime();if(t>this.options.duration+this.startTime)e=this.end,this.options.callback.call(this.elem),this.stop();else{var i=t-this.startTime,a=i/this.options.duration,n=s[this.options.easing](a,0,1,this.options.duration);e=this.start+(this.end-this.start)*n}this.update(this.name,e)},n.prototype.stop=function(){for(var e=t.length;e--;)t[e]===this&&t.splice(e,1)},n.prototype.update=function(e,t){"opacity"!=e&&(t+="px"),k.set(this.elem,e,t)},n.tick=function(){e||(e=setInterval(function(){for(var e=0,i=t.length;i>e;e++)t[e]&&t[e].step();t.length||n.stop()},13))},n.stop=function(){clearInterval(e),e=null};var s={linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}};return a}(),T=function(){var e=null;return function(t){e=setInterval(function(){for(var e=0;t.length>e;e++)t[e]&&t[e].detect()},500)}}(),S={adsArray:[],initData:function(){for(var e=a.getElementsByTagName("img"),t=0,i=e.length;i>t;t++){var n=e[t];r[t]=n,n.insId=t,n.setAttribute("instreet_img_id",t),S.onImgLoad(n)}},onImgLoad:function(e){var t=new Image;t.src=e.src,t.insId=e.insId,t.complete?S.loadData(t):t.onload=function(){var e=this;e.onload=null,S.loadData(t)}},loadData:function(e){var t=e.insId,i=r[t];if(e.width>=h.imiw&&e.height>=h.imih&&(i.clientWidth>=h.imiw&&i.clientHeight>=h.imih||0==i.clientWidth&&0==i.clientHeight)){if("number"==typeof h.adsLimit&&0>=h.adsLimit)return;i.setAttribute("instreet_data_loading",!0),i.insDataLoading=!0,U.recordImage(i),S.createJsonp(i),h.adsLimit&&h.adsLimit--}},createJsonp:function(e){var t=h.width||250,i=h.height||250,a=encodeURIComponent(encodeURIComponent(e.src)),n=h.callbackurl+"?index="+e.insId+"&pd="+h.widgetSid+"&iu="+a+"&callback=insjsonp"+"&w="+t+"&h="+i;m.importFile("js",n)}};e.insjsonp=function(e){if(e){var t=e.index,i=r[t];i.insDataLoaded=!0,i.setAttribute("instreet_data_loaded",!0);var a=new U(e,C.container);A(t),S.adsArray[t]=a}};var A=function(e){var t=S.adsArray[e];if(t&&t.adWrapper){var i=t.adWrapper,a=i.parentNode;a&&a.removeChild(i);for(var n=0,s=t.spotsArray.length;s>n;n++){var r=t.spotsArray[n].parentNode;r&&r.removeChild(t.spotsArray[n])}}},C={init:function(){var e=h.cssurl;m.importFile("css",e),C.createContainer()},createContainer:function(){var e=a.createElement("div"),t=a.createElement("div");e.id="instreet-plugin-container",t.id="instreet-plugin-spotbox",C.container=e,C.spotBox=t,e.appendChild(t),a.body.children&&a.body.insertBefore(e,a.body.firstChild)}},U=function(e,t){var i=r[e.index];this.data=e,this.container=t,this.img=i,this.originInfo={width:i.clientWidth,height:i.clientHeight,src:i.src,pos:m.getXY(i)},this.spotsArray=[],this.timerId=null,this.init()};U.prototype={constructor:U,isFirstApp:!0,init:function(){var e=this;e.createApps(),e.locate(),e.bindEvents()},createApps:function(){var e=this,t=a.createElement("div"),i=a.createElement("ul"),n=a.createElement("ul");0==h.position?t.className="in-ad-wrapper in-position-right":1==h.position&&(t.className="in-ad-wrapper in-position-left"),h.color&&(t.className+=" in-"+h.color+"style"),h.width&&(t.className+=" in-size"+h.width),i.className="in-tabs-wrapper",n.className="in-contents-wrapper",n.style.width="0";var s=a.createDocumentFragment(),r=a.createDocumentFragment();"2thwQrIEQvQz9mNHUQvr0c"==h.widgetSid&&(l[0]="shopApp",l[1]="adApp");for(var o=0,c=l.length;c>o;o++){var d=l[o];if("function"==typeof U.modules[d]){var p=U.modules[d](e);p&&(p.tab&&s.appendChild(p.tab),p.cont&&r.appendChild(p.cont))}}i.appendChild(s),n.appendChild(r),t.appendChild(i),t.appendChild(n),e.container.appendChild(t),e.adWrapper=t,e.tabs=i,e.contents=n},createSpot:function(e,t){var i=e.width,n=e.metrix,s=a.createElement("a"),r=u("instreet-plugin-spotbox");s.href="javascript:;",s.index=t,s.target="_self",s.metrix=n,s.imgWidth=i,e.adsType?s.className="instreet-shopSpot":"1"==""+e.type||"2"==""+e.type?s.className="instreet-weiboSpot":"4"==""+e.type&&(s.className="instreet-wikiSpot"),this.spotsArray.push(s),r.appendChild(s)},locate:function(){function e(e){s?(t.tabs.style.styleFloat=e,t.contents.style.styleFloat=e):(t.tabs.style.cssFloat=e,t.contents.style.cssFloat=e)}var t=this,i=t.img,n=m.getXY(i),r=i.offsetWidth,o=n.x+r+"px",c=Math.max(a.body.clientWidth,a.documentElement.clientWidth)-n.x+"px",l=n.y+"px",d=t.spotsArray,p=t.isSlideLeft(),u=m.isVisible(i)&&i.clientWidth>=h.imiw&&i.clientHeight>=h.imih?"block":"none";if(0==h.position?p?(e("right"),t.contents.className="in-contents-wrapper in-contents-slideleft",t.adWrapper.style.left="auto",t.adWrapper.style.right=Math.max(a.body.clientWidth,a.documentElement.clientWidth)-n.x-r-26+"px"):(e("left"),t.contents.className="in-contents-wrapper",t.adWrapper.style.right="auto",t.adWrapper.style.left=o):1==h.position&&(p?(e("right"),t.contents.className="in-contents-wrapper",t.adWrapper.style.right=c,t.adWrapper.style.left="auto"):(e("left"),t.contents.className="in-contents-wrapper in-contents-slideright",t.adWrapper.style.left=n.x-26+"px",t.adWrapper.style.right="auto")),t.adWrapper.style.top=l,t.adWrapper.style.display=u,"block"==u&&h.footAuto&&0!=t.isFirst&&(t.isFirst=!1,t.showApp(),t.recordShow(9)),d.length>0)for(var f=d[0].imgWidth,g=i.width/f,v=15,w=d.length;w--;){var b=d[w];metrix=b.metrix,ox=metrix%3e3,oy=Math.round(metrix/3e3),x=ox*g,y=oy*g,b.style.cssText="top:"+(y+n.y-v)+"px;left:"+(x+n.x-v)+"px;display:"+u}},bindEvents:function(){var e=this,t=e.tabs.children,i=e.contents.children;e.bindImgEvents(e.img),e.tabs.onmouseover=function(){clearTimeout(e.timerId)},e.tabs.onmouseout=function(){e.timerId=setTimeout(function(){e.closeApp()},h.timer)},e.contents.onmouseover=function(){clearTimeout(e.timerId)},e.contents.onmouseout=function(){e.timerId=setTimeout(function(){e.closeApp()},h.timer)},e.contents.onclick=function(t){var i=m.getEvent(t),a=m.getTarget(i);"in-close"==a.className?(e.closeApp(),(0==h.position&&e.isLeft||1==h.position&&!e.isLeft)&&(e.notopen=!0)):"in-share-icons"==a.parentNode.className&&e.shareImg(a),m.stopPropagation(i)};var a=m.$(e.contents,null,"in-shop-selector")[0];a&&f(a.children,function(e){var t=this;t.onclick=function(){U.chooseItem(this,e)}});var n=m.$(e.contents,null,"in-weibo-selector")[0];n&&f(n.children,function(e){var t=this;t.onclick=function(){U.chooseItem(this,e)}});var s=m.$(e.contents,null,"in-wiki-selector")[0];s&&f(s.children,function(e){var t=this;t.onclick=function(){U.chooseItem(this,e)}});for(var r=0,o=t.length;o>r;r++){var c=t[r],l=i[r];c.onmouseover=function(){if(!this.className.match(" focus")){var t=this.lastChild.className;e.showApp(this),("ad"==t||"shop"==t)&&e.recordShow(9)}},l.onmouseover=function(t){var i=m.getEvent(t),a=m.getRelatedTarget(i);v(this),this.contains(a)||e.recordWatch(this)}}for(var d=0,p=e.spotsArray.length;p>d;d++){var u=e.spotsArray[d];u.onmouseover=function(){switch(clearTimeout(e.timerId),this.className){case"instreet-shopSpot":var t,i=m.$(e.tabs,null,"shop")[0].parentNode,a=m.$(e.contents,null,"in-shop-selector")[0].children[this.index];t=a?a.className.match(" focus"):i.className.match(" focus"),a&&U.chooseItem(a,this.index),e.showApp(i),t||e.recordShow(9);break;case"instreet-weiboSpot":var i=m.$(e.tabs,null,"weibo")[0].parentNode,a=m.$(e.contents,null,"in-weibo-selector")[0].children[this.index];a&&U.chooseItem(a,this.index),e.showApp(i);break;case"instreet-wikiSpot":var i=m.$(e.tabs,null,"wiki")[0].parentNode;a=m.$(e.contents,null,"in-wiki-selector")[0].children[this.index],a&&U.chooseItem(a,this.index),e.showApp(i)}}}},bindImgEvents:function(e){for(var t,i,n=this,s=0,r=function(e){var n=a.getElementById(e.containerId)||a,s=m.$(n,e.leftClass)[0],r=m.$(n,e.rightClass)[0];s&&r&&(e.leftTitle&&e.leftTitle!=s.title||e.rightTitle&&e.rightTitle!=r.title||(t=s,i=r))};d.length>s;s++){var o=d[s];o.widgetSid!=h.widgetSid||r(o)}var c=function(){clearTimeout(n.timerId),n.notopen||0==n.contents.offsetWidth&&(n.showApp(),n.recordShow(10))},l=function(){clearTimeout(n.timerId),n.timerId=setTimeout(function(){n.closeApp()},h.timer),n.notopen=!1};m.bind(e,"mouseover",c),t&&m.bind(t,"mouseover",c),t&&m.bind(t,"mouseout",l),m.bind(e,"mouseout",l),i&&m.bind(i,"mouseover",c),i&&m.bind(i,"mouseout",l)},hideApps:function(){for(var e=this,t=e.tabs.children,i=t.length;i--;)t[i].className.match("focus")&&(t[i].className=t[i].className.replace(" focus",""));s?g(e.contents.children):f(e.contents.children,function(){this.style.cssText="display:block;visibility:hidden;height:0;overflow:hidden;"}),"auto"!=e.adWrapper.style.width&&(e.adWrapper.style.width="auto")},closeApp:function(){this.hideApps(),this.contents.style.width=0},showApp:function(e){var t,i,a=this,n=a.tabs.children;0!=n.length&&(e||(e=n[0]),t=e.lastChild.className,a.hideApps(),"auto"==a.adWrapper.style.width&&(a.adWrapper.style.width=h.width+42+"px"),e.className+=" focus",s?v(m.$(a.contents,"li",t)):f(m.$(a.contents,"li",t),function(){this.style.cssText="display:block;visibility:visible;height:auto;"}),i=h.width+16+"px",0==k.get(a.contents,"width")&&N(a.contents,{width:i},200,"linear"))},getSelectedIndex:function(e){for(var t="in-"+e+"-selector",i=m.$(this.contents,null,t)[0]?m.$(this.contents,null,t)[0].children:[],a=0,n=i.length;n>a;a++)if(i[a].className.match(" focus"))return a;return 0},shareImg:function(t){var i=this,s=encodeURIComponent(i.img.src),r=t.className.replace("-ico",""),o=i.data.widgetSid,c=(new Date).getTime(),l=encodeURIComponent(a.title),d=encodeURIComponent(n.href),p=h.surl+"?content=''&imgUrl="+encodeURIComponent(s)+"&widgetSid="+o+"&pageUrl="+encodeURIComponent(n.href)+"&shareTo="+r+"&time="+c,u="toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=580, height=500";switch(t.className){case"sina-ico":e.open("http://v.t.sina.com.cn/share/share.php?title="+l+"&url="+d+"&pic="+s,"_blank",u);break;case"renren-ico":e.open("http://share.renren.com/share/buttonshare.do?link="+d,"_blank",u);break;case"tx-ico":e.open("http://share.v.t.qq.com/index.php?c=share&a=index&title="+l+"&url="+d+"&pic="+s,"_blank",u);break;case"qzone-ico":e.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?showcount=1&url="+d+"&title="+l+"&pics="+s+"&summary=","_blank",u);break;case"sohu-ico":e.open("http://t.sohu.com/third/post.jsp?url="+d+"&title="+l+"&content=&pic="+s,"_blank",u);break;case"kaixin-ico":e.open("http://www.kaixin001.com/login/open_login.php?flag=1&url="+d+"&pic="+s+"&content="+l,"_blank",u);break;case"wangyi-ico":e.open("http://t.163.com/article/user/checkLogin.do?link="+n.host+"source=&info="+l+d+"&images="+s,"_blank",u);break;case"douban-ico":e.open("http://shuo.douban.com/!service/share?image="+s+"&href="+d+"&name="+l,"_blank",u)}m.importFile("js",p)},isSlideLeft:function(){var e=this.img,t=m.getXY(e),i=h.width+42;return 0==h.position?this.isLeft=1==h.outPosition?!0:2==h.outPosition?!1:t.x+e.offsetWidth+i>Math.max(a.body.clientWidth,a.documentElement.clientWidth)?!0:!1:1==h.position&&(this.isLeft=1==h.outPosition?!1:2==h.outPosition?!0:t.x>=i?!0:!1),this.isLeft},detect:function(){var e=this,t=e.img,i=e.originInfo,n=(e.adWrapper,m.getXY(t));if(0>=t.clientWidth||0>=t.clientHeight)for(var s=a.images,r=s.length;r--;)if(s[r].src==t.src&&s[r].clientWidth>=h.imiw&&s[r].clientHeight>=h.imih&&t.insId==s[r].getAttribute("instreet_img_id")){s[r].insId=t.insId,e.img=s[r],i.pos=n,e.bindImgEvents(e.img),e.locate();break}t.src&&t.src!=i.src?(A(t.insId),c=!0,i.src=t.src,"number"==typeof h.adsLimit&&h.adsLimit++,S.onImgLoad(t)):(n.x!==i.pos.x||n.y!==i.pos.y||t.clientWidth!=i.width||t.clientHeight!=i.height)&&(i.pos=n,i.width=t.clientWidth,i.height=t.clientHeight,e.locate())},recordShow:function(e){var t=this,i=t.data,a=t.img,n=h.iurl,s=i.widgetSid,r=i.imageUrlHash,o=encodeURIComponent(encodeURIComponent(a.src)),c=m.$(t.tabs,null,"focus")[0],l="",d="",p=0,u="",f=(new Date).getTime();if(c)if("ad"==c.lastChild.className){var g=i.badsSpot[0];l=g.adsId,d=g.adsType,g.adViewMonitorUrl&&m.importFile("js",g.adViewMonitorUrl+"?time="+f)}else"shop"==c.lastChild.className&&(p=t.getSelectedIndex("shop"),l=i.adsSpot[p].adsId,d=i.adsSpot[p].adsType,u=i.adsSpot[p].metrix);n+="?pd="+s+"&mx="+u+"&muh="+r+"&iu="+o+"&ad="+l+"&at="+d+"&flag="+e+"&time="+f,m.importFile("js",n)},recordWatch:function(e){var t=this,i=t.data,a=t.img,n=encodeURIComponent(encodeURIComponent(a.src)),s=i.widgetSid,r=h.murl,o=(i.imageNumId||"",i.imageUrlHash),c="",l="",d=0,p=1,u="",f=e.className,g=t.getSelectedIndex(f);if("shop"==f)c=i.adsSpot[g].adsId,l=i.adsSpot[g].adsType,u=i.adsSpot[g].metrix,p=0;else if("weibo"==f)d=2,u=i.weiboSpot[g].metrix||"";else if("wiki"==f)d=4,u=i.wikiSpot[g].metrix||"";else if("weather"==f)d=7;else if("news"==f)d=5;else{if("ad"!=f)return;c=i.badsSpot[0].adsId,l=i.badsSpot[0].adsType,p=0}var v=(new Date).getTime();r+="?iu="+n+"&mx="+u+"&pd="+s+"&muh="+o+"&ad="+c+"&at="+l+"&tty="+p+"&ift="+d+"&time="+v,m.importFile("js",r)}},U.createTab=function(e,t,i){var n=a.createElement("li");return n.className="clearfix tab",n.className+=i?" "+i:"",n.innerHTML="<a class='"+e+"' href='javascript:;' target='_self'><span></span><em>"+t+"</em></a>",n},U.chooseItem=function(e,t){if(!e.className.match(" focus")){var i=e.parentNode,a=i.previousSibling,n=m.$(a,null,"focus")[0],s=m.$(i,null,"focus")[0],r=a.children[t];n.className=n.className.replace(" focus",""),s.className=s.className.replace(" focus",""),r.className+=" focus",e.className+=" focus"}},U.reLocate=function(){var e=S.adsArray;for(i in e){var t=e[i];t.locate&&t.locate()}},U.recordImage=function(t){var i=encodeURIComponent(encodeURIComponent(t.src)),n=h.widgetSid,s=(encodeURIComponent(encodeURIComponent(e.location.href)),encodeURIComponent(encodeURIComponent(a.title))),r=h.ourl,o=(new Date).getTime();r+="?iu="+i+"&pd="+n+"&t="+s+"&time="+o,m.importFile("js",r)},U.modules={adApp:function(e){if(h.showFootAd&&0!=e.data.badsSpot.length){var t,i,n,s,r,o=h.width;if(e.isFirstApp?(t=U.createTab("ad","推广","first"),e.isFirstApp=!1):t=U.createTab("ad","推广"),n=e.data,s=n.badsSpot[0],i=a.createElement("li"),i.className="ad",s.adClickMonitorUrl){var c=s.adClickMonitorUrl+encodeURIComponent(s.adsLinkUrl||"");r=h.redurl+"?tty=0&mx=&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift=&at="+(s.adsType||"")+"&ad="+(s.adsId||"")+"&rurl="+encodeURIComponent(encodeURIComponent(c))}else r=h.redurl+"?tty=0&mx=&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift=&at="+(s.adsType||"")+"&ad="+(s.adsId||"")+"&rurl="+encodeURIComponent(encodeURIComponent(s.adsLinkUrl||""));return str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>产品推广</h3><div class="main-cont">',3==s.adsType?str+="<a class='large-image' target='_blank' href='"+r+"'><img src='"+s.adsPicUrl+"' alt=''/></a>":9==s.adsType?(str+='<object id="afg-adloader" width="'+o+'" height="'+o+'"  align="middle" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000">',str+='<param value="always" name="allowScriptAccess"/><param value="'+s.adsPicUrl+'" name="movie"/><param value="high" name="quality"/><param value="opaque" name="wmode"/><param value="high" name="quality"><param value="#F1F1F1" name="bgcolor"/>',str+='<embed width="'+o+'" height="'+o+'" align="middle" pluginspage="http://www.adobe.com/go/getflashplayer"  type="application/x-shockwave-flash" allowscriptaccess="always" wmode="opaque"  bgcolor="#F1F1F1" quality="high" src="'+s.adsPicUrl+'"></object>',str+='<a class="flash-cover" href="'+r+'" target="_blank"></a>'):!s.adsLinkUrl&&s.description&&(str+='<iframe src="'+s.description+'" scrolling="no" height="'+h.height+'" width="'+h.width+'" frameborder="0" border="0" marginwidth="0" marginheight="0"></iframe>'),str+="</div>",i.innerHTML=str,{tab:t,cont:i}}},shopApp:function(e){if(h.showAd&&0!=e.data.adsSpot.length){var t,i,n,s,r,o,c,l,d,p,m='<div class="in-shop-selector">';e.isFirstApp?(t=U.createTab("shop","折扣","first"),e.isFirstApp=!1):t=U.createTab("shop","折扣"),s=e.data,i=a.createElement("li"),i.className="shop",n='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>品牌折扣</h3><div class="main-cont">',n+='<div class="in-slider-container">';for(var u=0,f=s.adsSpot.length;f>u;u++)p=0==u?" focus":"",r=s.adsSpot[u],e.createSpot(r,u),o=h.redurl+"?tty=0&mx="+r.metrix+"&muh="+s.imageUrlHash+"&pd="+r.widgetSid+"&ift=&at="+r.adsType+"&ad="+r.adsId+"&rurl="+encodeURIComponent(encodeURIComponent(r.adsLinkUrl)),l=r.adsTitle,d=r.adsDiscount||r.adsPrice,c=r.adsPicUrl.replace("160x160",h.width+"x"+h.width),n+='<a target="_blank" class="pro-box'+p+'" href="'+o+'"><img class="ins-shop-image" src="'+c+'"/><span class="pro-info"><span class="pro-name">'+l+'</span><span class="pro-tobuy"><em>进入商店</em></span><span class="pro-price">¥'+d+"</span></span></a>",f>1&&(m+='<a href="javascript:;" target="_self" class="select-item'+p+'"></a>');return n+="</div>"+m+"</div></div>",i.innerHTML=n,{tab:t,cont:i}}},weiboApp:function(e){if(h.showWeibo&&0!=e.data.weiboSpot.length){var t,i,n,s,r,o,c,l,d="",p="",m='<div class="in-weibo-selector">';e.isFirstApp?(t=U.createTab("weibo","微博","first"),e.isFirstApp=!1):t=U.createTab("weibo","微博"),n=e.data,i=a.createElement("li"),i.className="weibo",d='<h3 class="title clearfix"><a title="关闭" href="javascript:;" class="in-close">×</a>相关微博</h3><div class="main-cont">',d+='<div class="in-slider-container">';for(var u=0,f=n.weiboSpot.length;f>u;u++)p=0==u?" focus":"",s=n.weiboSpot[u],e.createSpot(s,u),l=s.avatar,icon=s.icon,r=s.title,c=s.latestStatus,o=h.redurl+"?tty=1&mx="+s.metrix+"&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift="+s.type+"&at=&ad=&rurl="+encodeURIComponent(encodeURIComponent(s.userUrl)),d+='<div class="weibo-item'+p+'"><div class="left"><a href="'+o+'" target="_blank" title="'+r+'"><img src="'+l+'"/></a></div><div class="right"><h3><a href="'+o+'" target="_blank">'+r+'</a></h3><p><em class="arrow-one"></em><em class="arrow-two"></em>'+c+'</p><div class="icon-section"><a href="'+o+'" target="_blank"><img src="'+icon+'"/></a></div></div></div>',f>1&&(m+='<a href="javascript:;" class="select-item'+p+'"></a>');return d+="</div>"+m+"</div></div>",i.innerHTML=d,{tab:t,cont:i}}},wikiApp:function(e){if(h.showWiki&&0!=e.data.wikiSpot.length){var t,i,n,s,r,o,c,l,d="",p="",m='<div class="in-wiki-selector">';e.isFirstApp?(t=U.createTab("wiki","百科","first"),e.isFirstApp=!1):t=U.createTab("wiki","百科"),n=e.data,i=a.createElement("li"),i.className="wiki",d='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>相关百科</h3><div class="main-cont">',d+='<div class="in-slider-container">';for(var u=0,f=n.wikiSpot.length;f>u;u++)p=0==u?" focus":"",s=n.wikiSpot[u],e.createSpot(s,u),l=s.firstimg,r=s.title,c=s.summary,o=h.redurl+"?tty=1&mx="+s.metrix+"&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift="+s.type+"&at=&tg="+encodeURIComponent(encodeURIComponent(r))+"&rurl="+encodeURIComponent(encodeURIComponent(s.url)),d+='<div class="wiki-item'+p+'"><div class="left"><a class="thumb" href="'+o+'" target="_blank" title="'+r+'"><img src="'+l+'"/></a><h3><a class="tagName" href="'+o+'" target="_blank">'+r+'</a></h3></div><div class="right"><p><em class="arrow-one"></em><em class="arrow-two"></em>'+c+'</p><div class="icon-section"><a href="'+o+'" target="_blank"><img src="http://static.instreet.cn/widgets/push/images/icon_baike.png"/></a></div></div></div>',f>1&&(m+='<a href="javascript:;" target="_self" class="select-item'+p+'"></a>');return d+="</div>"+m+"</div></div>",i.innerHTML=d,{tab:t,cont:i}}},newsApp:function(e){if(h.showNews){var t,i,n=e.data,s=h.width,r=h.height,o=p+"news?size="+s+"&pd="+n.widgetSid+"&muh="+n.imageUrlHash;e.isFirstApp?(t=U.createTab("news","新闻","first"),e.isFirstApp=!1):t=U.createTab("news","新闻");var i=a.createElement("li");return i.className="news",str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>热点新闻</h3><div class="main-cont">',str+='<iframe name="weather_inc" src="'+o+'" width="'+s+'" height="'+r+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>',str+="</div>",i.innerHTML=str,{tab:t,cont:i}}},weatherApp:function(e){if(h.showWeather){var t,i,n=h.width,s="http://www.thinkpage.cn/weather/weather.aspx?uid=&cid=101010100&l=zh-CHS&p=TWC&a=1&u=C&s=1&m=0&x=1&d=3&fc=&bgc=&bc=&ti=1&in=1&li=2&ct=iframe";e.isFirstApp?(t=U.createTab("weather","天气","first"),e.isFirstApp=!1):t=U.createTab("weather","天气");var i=a.createElement("li");return i.className="weather",str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>天气预报</h3><div class="main-cont">',str+='<iframe name="weather_inc" src="'+s+'" width="'+n+'" height="110" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true" ></iframe>',str+="</div>",i.innerHTML=str,{tab:t,cont:i}}},shareApp:function(e){if(h.showShareButton){var t,i;e.isFirstApp?(t=U.createTab("share","分享","first"),e.isFirstApp=!1):t=U.createTab("share","分享");var i=a.createElement("li");return i.className="share",str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>图片分享</h3><div class="main-cont">',str+='<div class="in-share-icons"><a title="新浪微博" class="sina-ico" href="javascript:;" target="_self"></a><a title="腾讯微博" class="tx-ico" href="javascript:;" target="_self"></a><a title="QQ空间" class="qzone-ico" href="javascript:;" target="_self"></a><a title="人人网" class="renren-ico" href="javascript:;" target="_self"></a><a title="搜狐微博" class="sohu-ico" href="javascript:;" target="_self"></a><a title="网易微博" class="wangyi-ico" href="javascript:;" target="_self"></a><a title="豆瓣" class="douban-ico" href="javascript:;" target="_self"></a><a title="开心网" class="kaixin-ico" href="javascript:;" target="_self"></a>',str+="</div></div>",i.innerHTML=str,{tab:t,cont:i}}}};var E=function(e){e=e||0;for(var t=a.getElementsByTagName("img"),i=0,n=t.length;n>i;i++){var s=t[i];-1!=s.className.indexOf("ins-shop-image")||1==s.insDataLoading||s.getAttribute("instreet_data_loading")||1==s.insDataLoaded||s.getAttribute("instreet_data_loaded")||(s.insId===undefined&&(s.insId=r.length),s.setAttribute("instreet_img_id",s.insId),r[s.insId]=s,S.onImgLoad(s))}5>e&&setTimeout(function(){E(++e)},1e3)},W=function(e){if(e&&"object"==typeof e){for(var t in e)h[t]=e[t];h.color=h.color&&h.color.toLowerCase()}};I(function(){t()})})(window);