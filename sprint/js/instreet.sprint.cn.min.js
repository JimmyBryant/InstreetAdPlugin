/*!2013-07-04 */
(function(e){function t(){"undefined"!=typeof instreet_config&&U(instreet_config),S.init(),T.initData(),p.bind(e,"load",function(){A.reLocate(),C()}),p.bind(e,"resize",function(){A.reLocate()}),k(T.adsArray)}if(e.InstreetWidget!==undefined||null!=e.InstreetWidget)return null;e.InstreetWidget={version:"@REVISION@",type:"InstreetImageWidget"};var a=e.document,n=(e.navigator,e.location),s=!!e.ActiveXObject,r=[],o=[],c=!0,l="http://push.instreet.cn/",d={redurl:l+"click.action",callbackurl:l+"push.action",murl:l+"tracker.action",iurl:l+"tracker90.action",ourl:l+"loadImage.action",surl:l+"share/weiboshare",cssurl:"http://static.instreet.cn/widgets/push/css/instreet.sprint.min.css",imih:300,imiw:300,timer:1e3,width:250,height:250},p={bind:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i},remove:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.datachEvent?e.datachEvent("on"+t,i):e["on"+t]=null},getEvent:function(t){return t?t:e.event},getTarget:function(e){return e.target||e.srcElement},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getRelatedTarget:function(e){return e.relatedTarget?e.relatedTarget:"mouseover"==e.type?e.fromElement:"mouseout"==e.type?e.toElement:null},getXY:function(e){var t=0,i=0;if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),s=a.documentElement;t=n.left+Math.max(s.scrollLeft,a.body.scrollLeft)-s.clientLeft,i=n.top+Math.max(s.scrollTop,a.body.scrollTop)-s.clientTop}else for(;e!=a.body;t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent);return{x:t,y:i}},aTrim:function(e){function t(e,t){return e-t}var i=[];e.sort(t);for(var a=e.length,n=0,s=0;a>s;s++)e[s]!=e[s+1]&&(i[n]=e[s],n++);return i},$:function(e,t,i){var n,s=e||a;if(2==arguments.length)i=t,n="*";else var n=t||"*";if(a.getElementsByClassName)return s.getElementsByClassName(i);for(var r=[],o=s.getElementsByTagName(n),c=o.length,l=c;l--;){var d=o[l];if(d.className)for(var p=d.className.replace(/\s/g,"|").split("|"),h=p.length,m=h;m--;)if(p[m]==i){r.push(d);break}}return r},importFile:function(e,t){var i,n,s=a.getElementsByTagName("head")[0]||a.documentElement;switch(e){case"js":n=a.createElement("script"),n.async="async",n.charset="utf-8",n.type="text/javascript",n.onload=n.onreadystatechange=function(){n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onload=n.onreadystatechange=null,s&&n.parentNode&&s.removeChild(n))},n.src=t,s.appendChild(n);break;case"css":i=a.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=t,s.appendChild(i)}},isVisible:function(t){if(t==a)return!0;if(!t)return!1;if(!t.parentNode)return!1;if(t.style){if("none"==t.style.display)return!1;if("hidden"==t.style.visibility)return!1}if(e.getComputedStyle){var i=e.getComputedStyle(t,"");if("none"==i.display)return!1;if("hidden"==i.visibility)return!1}var i=t.currentStyle;if(i){if("none"==i.display)return!1;if("hidden"==i.visibility)return!1}return p.isVisible(t.parentNode)}},h=function(e){return a.getElementById(e)},m=function(e,t){if(e.length)for(var i=0,a=e.length;a>i;i++)t.call(e[i],i);else t.call(e,0)},u=function(e){m(e,function(){this.style.display="none"})},f=function(e){m(e,function(){this.style.display="block"})},o=[],g=function(){for(var e=0;o.length>e;e++)o[e]&&o[e]()},v=function(){try{a.documentElement.doScroll("left")}catch(e){return setTimeout(v,1),undefined}g()},w=function(t){var i=!!e.ActiveXObject;if("complete"===a.readyState)return o.push(t),g(),undefined;if(!(o.push(t)>1))return a.addEventListener?a.addEventListener("DOMContentLoaded",g,!1):(i&&v(),undefined)},b={get:function(e,t){var i;if("float"==t&&(t=a.defaultView?"cssFloat":"styleFloat"),"opacity"==t&&(t=a.defaultView?"opacity":"filter"),a.defaultView&&a.defaultView.getComputedStyle)var i=a.defaultView.getComputedStyle(e,null)[t];else e.currentStyle&&(i=e.currentStyle[t],"filter"==t&&(i.match("alpha")?i=parseFloat(i.match(/\d+/)[0])/100:i||(i=1)));return"string"==typeof i&&i.match("px")?i=parseInt(i.replace("px","")):i,"opacity"==t?i=parseInt(i):i,i},set:function(e,t,i){"float"==t&&(t=a.defaultView?"cssFloat":"styleFloat"),"opacity"==t&&(e.style.filter="alpha(opacity="+100*i+")",e.style.zoom=1),e.style[t]=i}},I=function(){var e,t=[],i=function(e){for(var t in e)return!1;return!0},a=function(e,t,s,r,o){var c=a.getOpt(s,r,o);if(e&&1==e.nodeType){var l;if(t&&"object"==typeof t)if(i(t))o.call(e);else for(var d in t){var p=new n(e,c,d);l=b.get(e,d),end=parseFloat(t[d]),p.custom(l,end)}}};a.getOpt=function(e,t,i){var a={duration:e||200,easing:t||"linear"};return a.callback=function(){i&&i()},a},a.stop=function(e,i){i=i||!1;for(var a=t.length;a--;){var n=t[a];n.elem===e&&(i&&n.update(n.name,n.end),t.splice(a,1))}};var n=function(e,t,i){this.elem=e,this.options=t,this.name=i};n.prototype.custom=function(e,i){this.startTime=(new Date).getTime(),this.start=e,this.end=i,t.push(this),n.tick()},n.prototype.step=function(){var e,t=(new Date).getTime();if(t>this.options.duration+this.startTime)e=this.end,this.options.callback.call(this.elem),this.stop();else{var i=t-this.startTime,a=i/this.options.duration,n=s[this.options.easing](a,0,1,this.options.duration);e=this.start+(this.end-this.start)*n}this.update(this.name,e)},n.prototype.stop=function(){for(var e=t.length;e--;)t[e]===this&&t.splice(e,1)},n.prototype.update=function(e,t){"opacity"!=e&&(t+="px"),b.set(this.elem,e,t)},n.tick=function(){e||(e=setInterval(function(){for(var e=0,i=t.length;i>e;e++)t[e]&&t[e].step();t.length||n.stop()},13))},n.stop=function(){clearInterval(e),e=null};var s={linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}};return a}(),k=function(){var e=null;return function(t){e=setInterval(function(){for(var e=0;t.length>e;e++)t[e]&&t[e].detect()},500)}}(),T={adsArray:[],initData:function(){for(var e=a.getElementsByTagName("img"),t=0,i=e.length;i>t;t++){var n=e[t];r[t]=n,n.insId=t,n.setAttribute("instreet_img_id",t),T.onImgLoad(n)}},onImgLoad:function(e){var t=new Image;t.src=e.src,t.insId=e.insId,t.complete?T.loadData(t):t.onload=function(){var e=this;e.onload=null,T.loadData(t)}},loadData:function(e){var t=e.insId,i=r[t];e.width>=d.imiw&&e.height>=d.imih&&(i.clientWidth>=d.imiw&&i.clientHeight>=d.imih||0==i.clientWidth&&0==i.clientHeight)&&A.recordImage(i)},createJsonp:function(e){var t=d.width||250,i=d.height||250,a=encodeURIComponent(encodeURIComponent(e.src)),n=d.callbackurl+"?index="+e.insId+"&pd="+d.widgetSid+"&iu="+a+"&callback=insjsonp"+"&w="+t+"&h="+i;p.importFile("js",n)}};e.ins_image_jsonp=function(e){if(!e||1!=e.image_context_sensi){var t=r[e.index];"number"==typeof d.adsLimit&&0>=d.adsLimit||(t.setAttribute("instreet_data_loading",!0),t.insDataLoading=!0,T.createJsonp(t),d.adsLimit&&d.adsLimit--)}},e.insjsonp=function(e){if(e){var t=e.index,i=r[t];i.insDataLoaded=!0,i.setAttribute("instreet_data_loaded",!0);var a=new A(e,S.container);N(t),T.adsArray[t]=a}};var N=function(e){var t=T.adsArray[e];if(t&&t.adWrapper){var i=t.adWrapper,a=i.parentNode;a&&a.removeChild(i);for(var n=0,s=t.spotsArray.length;s>n;n++){var r=t.spotsArray[n].parentNode;r&&r.removeChild(t.spotsArray[n])}}},S={init:function(){var e=d.cssurl;p.importFile("css",e),S.createContainer()},createContainer:function(){var e=a.createElement("div"),t=a.createElement("div");e.id="instreet-plugin-container",t.id="instreet-plugin-spotbox",S.container=e,S.spotBox=t,e.appendChild(t),a.body.children&&a.body.insertBefore(e,a.body.firstChild)}},A=function(e,t){var i=r[e.index];this.data=e,this.container=t,this.img=i,this.originInfo={width:i.clientWidth,height:i.clientHeight,src:i.src,pos:p.getXY(i)},this.spotsArray=[],this.timerId=null,this.init()};A.prototype={constructor:A,isFirstApp:!0,init:function(){var e=this;e.createApps(),e.locate(),e.bindEvents()},createApps:function(){var e=this,t=a.createElement("div"),n=a.createElement("ul"),s=a.createElement("ul");0==d.position?t.className="in-ad-wrapper in-position-right":1==d.position&&(t.className="in-ad-wrapper in-position-left"),d.color&&(t.className+=" in-"+d.color+"style"),d.width&&(t.className+=" in-size"+d.width),n.className="in-tabs-wrapper",s.className="in-contents-wrapper",s.style.width="0";var r=a.createDocumentFragment(),o=a.createDocumentFragment();for(i in A.modules)if("function"==typeof A.modules[i]){var c=A.modules[i](e);c&&(c.tab&&r.appendChild(c.tab),c.cont&&o.appendChild(c.cont))}n.appendChild(r),s.appendChild(o),t.appendChild(n),t.appendChild(s),e.container.appendChild(t),e.adWrapper=t,e.tabs=n,e.contents=s},createSpot:function(e,t){var i=e.width,n=e.metrix,s=a.createElement("a"),r=h("instreet-plugin-spotbox");s.href="javascript:;",s.index=t,s.target="_self",s.metrix=n,s.imgWidth=i,e.adsType?s.className="instreet-shopSpot":"1"==""+e.type||"2"==""+e.type?s.className="instreet-weiboSpot":"4"==""+e.type&&(s.className="instreet-wikiSpot"),this.spotsArray.push(s),r.appendChild(s)},locate:function(){function e(e){s?(t.tabs.style.styleFloat=e,t.contents.style.styleFloat=e):(t.tabs.style.cssFloat=e,t.contents.style.cssFloat=e)}var t=this,i=t.img,n=p.getXY(i),r=i.offsetWidth,o=n.x+r+"px",c=Math.max(a.body.clientWidth,a.documentElement.clientWidth)-n.x+"px",l=n.y+"px",h=t.spotsArray,m=t.isSlideLeft(),u=p.isVisible(i)&&i.clientWidth>=d.imiw&&i.clientHeight>=d.imih?"block":"none";if(0==d.position?m?(e("right"),t.contents.className="in-contents-wrapper in-contents-slideleft",t.adWrapper.style.left="auto",t.adWrapper.style.right=Math.max(a.body.clientWidth,a.documentElement.clientWidth)-n.x-r-26+"px"):(e("left"),t.contents.className="in-contents-wrapper",t.adWrapper.style.right="auto",t.adWrapper.style.left=o):1==d.position&&(m?(e("right"),t.contents.className="in-contents-wrapper",t.adWrapper.style.right=c,t.adWrapper.style.left="auto"):(e("left"),t.contents.className="in-contents-wrapper in-contents-slideright",t.adWrapper.style.left=n.x-26+"px",t.adWrapper.style.right="auto")),t.adWrapper.style.top=l,t.adWrapper.style.display=u,"block"==u&&d.footAuto&&0!=t.isFirst&&(t.isFirst=!1,t.showApp(),t.recordShow(9)),h.length>0)for(var f=h[0].imgWidth,g=i.width/f,v=15,w=h.length;w--;){var b=h[w];metrix=b.metrix,ox=metrix%3e3,oy=Math.round(metrix/3e3),x=ox*g,y=oy*g,b.style.cssText="top:"+(y+n.y-v)+"px;left:"+(x+n.x-v)+"px;display:"+u}},bindEvents:function(){var e=this,t=e.tabs.children,i=e.contents.children;e.bindImgEvents(e.img),e.tabs.onmouseover=function(){clearTimeout(e.timerId)},e.tabs.onmouseout=function(){e.timerId=setTimeout(function(){e.closeApp()},d.timer)},e.contents.onmouseover=function(){clearTimeout(e.timerId)},e.contents.onmouseout=function(){e.timerId=setTimeout(function(){e.closeApp()},d.timer)},e.contents.onclick=function(t){var i=p.getEvent(t),a=p.getTarget(i);"in-close"==a.className?(e.closeApp(),(0==d.position&&e.isLeft||1==d.position&&!e.isLeft)&&(e.notopen=!0),e.cantShow=!0):"in-share-icons"==a.parentNode.className&&e.shareImg(a),p.stopPropagation(i)};var a=p.$(e.contents,null,"in-shop-selector")[0];a&&m(a.children,function(e){var t=this;t.onclick=function(){A.chooseItem(this,e)}});var n=p.$(e.contents,null,"in-weibo-selector")[0];n&&m(n.children,function(e){var t=this;t.onclick=function(){A.chooseItem(this,e)}});var s=p.$(e.contents,null,"in-wiki-selector")[0];s&&m(s.children,function(e){var t=this;t.onclick=function(){A.chooseItem(this,e)}});for(var r=0,o=t.length;o>r;r++){var c=t[r],l=i[r];c.onmouseover=function(){if(!this.className.match(" focus")){var t=this.lastChild.className;e.showApp(this),("ad"==t||"shop"==t)&&e.recordShow(9)}},l.onmouseover=function(t){var i=p.getEvent(t),a=p.getRelatedTarget(i);f(this),this.contains(a)||e.recordWatch(this)}}for(var h=0,u=e.spotsArray.length;u>h;h++){var g=e.spotsArray[h];g.onmouseover=function(){switch(clearTimeout(e.timerId),this.className){case"instreet-shopSpot":var t,i=p.$(e.tabs,null,"shop")[0].parentNode,a=p.$(e.contents,null,"in-shop-selector")[0].children[this.index];t=a?a.className.match(" focus"):i.className.match(" focus"),a&&A.chooseItem(a,this.index),e.showApp(i),t||e.recordShow(9);break;case"instreet-weiboSpot":var i=p.$(e.tabs,null,"weibo")[0].parentNode,a=p.$(e.contents,null,"in-weibo-selector")[0].children[this.index];a&&A.chooseItem(a,this.index),e.showApp(i);break;case"instreet-wikiSpot":var i=p.$(e.tabs,null,"wiki")[0].parentNode;a=p.$(e.contents,null,"in-wiki-selector")[0].children[this.index],a&&A.chooseItem(a,this.index),e.showApp(i)}}}},bindImgEvents:function(e){var t=this,i=h("apDiv1"),a=h("apDiv2"),n=function(){clearTimeout(t.timerId),t.notopen||t.cantShow||0==t.contents.offsetWidth&&(t.showApp(),t.recordShow(10))},s=function(){clearTimeout(t.timerId),t.timerId=setTimeout(function(){t.closeApp()},d.timer),t.notopen=!1};p.bind(e,"mouseover",n),i&&p.bind(i,"mouseover",n),a&&p.bind(a,"mouseover",n),p.bind(e,"mouseout",s),i&&p.bind(i,"mouseout",s),a&&p.bind(a,"mouseout",s)},hideApps:function(){for(var e=this,t=e.tabs.children,i=t.length;i--;)t[i].className.match("focus")&&(t[i].className=t[i].className.replace(" focus",""));s?u(e.contents.children):m(e.contents.children,function(){this.style.cssText="display:block;visibility:hidden;height:0;overflow:hidden;"}),"auto"!=e.adWrapper.style.width&&(e.adWrapper.style.width="auto")},closeApp:function(){this.hideApps(),this.contents.style.width=0},showApp:function(e){var t,i,a=this,n=a.tabs.children;0!=n.length&&(e||(e=n[0]),t=e.lastChild.className,a.hideApps(),"auto"==a.adWrapper.style.width&&(a.adWrapper.style.width=d.width+42+"px"),e.className+=" focus",s?f(p.$(a.contents,"li",t)):m(p.$(a.contents,"li",t),function(){this.style.cssText="display:block;visibility:visible;height:auto;"}),i=d.width+16+"px",0==b.get(a.contents,"width")&&I(a.contents,{width:i},200,"linear"))},getSelectedIndex:function(e){for(var t="in-"+e+"-selector",i=p.$(this.contents,null,t)[0]?p.$(this.contents,null,t)[0].children:[],a=0,n=i.length;n>a;a++)if(i[a].className.match(" focus"))return a;return 0},shareImg:function(t){var i=this,s=encodeURIComponent(i.img.src),r=t.className.replace("-ico",""),o=i.data.widgetSid,c=(new Date).getTime(),l=encodeURIComponent(a.title),h=encodeURIComponent(n.href),m=d.surl+"?content=''&imgUrl="+encodeURIComponent(s)+"&widgetSid="+o+"&pageUrl="+encodeURIComponent(n.href)+"&shareTo="+r+"&time="+c,u="toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=580, height=500";switch(t.className){case"sina-ico":e.open("http://v.t.sina.com.cn/share/share.php?title="+l+"&url="+h+"&pic="+s,"_blank",u);break;case"renren-ico":e.open("http://share.renren.com/share/buttonshare.do?link="+h,"_blank",u);break;case"tx-ico":e.open("http://share.v.t.qq.com/index.php?c=share&a=index&title="+l+"&url="+h+"&pic="+s,"_blank",u);break;case"qzone-ico":e.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?showcount=1&url="+h+"&title="+l+"&pics="+s+"&summary=","_blank",u);break;case"sohu-ico":e.open("http://t.sohu.com/third/post.jsp?url="+h+"&title="+l+"&content=&pic="+s,"_blank",u);break;case"kaixin-ico":e.open("http://www.kaixin001.com/login/open_login.php?flag=1&url="+h+"&pic="+s+"&content="+l,"_blank",u);break;case"wangyi-ico":e.open("http://t.163.com/article/user/checkLogin.do?link="+n.host+"source=&info="+l+h+"&images="+s,"_blank",u);break;case"douban-ico":e.open("http://shuo.douban.com/!service/share?image="+s+"&href="+h+"&name="+l,"_blank",u)}p.importFile("js",m)},isSlideLeft:function(){var e=this.img,t=p.getXY(e),i=d.width+42;return 0==d.position?this.isLeft=1==d.outPosition?!0:2==d.outPosition?!1:t.x+e.offsetWidth+i>Math.max(a.body.clientWidth,a.documentElement.clientWidth)?!0:!1:1==d.position&&(this.isLeft=1==d.outPosition?!1:2==d.outPosition?!0:t.x>=i?!0:!1),this.isLeft},detect:function(){var e=this,t=e.img,i=e.originInfo,n=(e.adWrapper,p.getXY(t));if(0>=t.clientWidth||0>=t.clientHeight)for(var s=a.images,r=s.length;r--;)if(s[r].src==t.src&&s[r].clientWidth>=d.imiw&&s[r].clientHeight>=d.imih&&t.insId==s[r].getAttribute("instreet_img_id")){s[r].insId=t.insId,e.img=s[r],i.pos=n,e.bindImgEvents(e.img),e.locate();break}t.src&&t.src!=i.src?(N(t.insId),c=!0,i.src=t.src,"number"==typeof d.adsLimit&&d.adsLimit++,T.onImgLoad(t)):(n.x!==i.pos.x||n.y!==i.pos.y||t.clientWidth!=i.width||t.clientHeight!=i.height)&&(i.pos=n,i.width=t.clientWidth,i.height=t.clientHeight,e.locate())},recordShow:function(e){var t=this,i=t.data,a=t.img,n=d.iurl,s=i.widgetSid,r=i.imageUrlHash,o=encodeURIComponent(encodeURIComponent(a.src)),c=p.$(t.tabs,null,"focus")[0],l="",h="",m=0,u="",f=(new Date).getTime();if(c)if("ad"==c.lastChild.className){var g=i.badsSpot[0];l=g.adsId,h=g.adsType,g.adViewMonitorUrl&&p.importFile("js",g.adViewMonitorUrl+"?time="+f)}else"shop"==c.lastChild.className&&(m=t.getSelectedIndex("shop"),l=i.adsSpot[m].adsId,h=i.adsSpot[m].adsType,u=i.adsSpot[m].metrix);n+="?pd="+s+"&mx="+u+"&muh="+r+"&iu="+o+"&ad="+l+"&at="+h+"&flag="+e+"&time="+f,p.importFile("js",n)},recordWatch:function(e){var t=this,i=t.data,a=t.img,n=encodeURIComponent(encodeURIComponent(a.src)),s=i.widgetSid,r=d.murl,o=(i.imageNumId||"",i.imageUrlHash),c="",l="",h=0,m=1,u="",f=e.className,g=t.getSelectedIndex(f);if("shop"==f)c=i.adsSpot[g].adsId,l=i.adsSpot[g].adsType,u=i.adsSpot[g].metrix,m=0;else if("weibo"==f)h=2,u=i.weiboSpot[g].metrix||"";else if("wiki"==f)h=4,u=i.wikiSpot[g].metrix||"";else if("weather"==f)h=7;else if("news"==f)h=5;else{if("ad"!=f)return;c=i.badsSpot[0].adsId,l=i.badsSpot[0].adsType,m=0}var v=(new Date).getTime();r+="?iu="+n+"&mx="+u+"&pd="+s+"&muh="+o+"&ad="+c+"&at="+l+"&tty="+m+"&ift="+h+"&time="+v,p.importFile("js",r)}},A.createTab=function(e,t,i){var n=a.createElement("li");return n.className="clearfix tab",n.className+=i?" "+i:"",n.innerHTML="<a class='"+e+"' href='javascript:;' target='_self'><span></span><em>"+t+"</em></a>",n},A.chooseItem=function(e,t){if(!e.className.match(" focus")){var i=e.parentNode,a=i.previousSibling,n=p.$(a,null,"focus")[0],s=p.$(i,null,"focus")[0],r=a.children[t];n.className=n.className.replace(" focus",""),s.className=s.className.replace(" focus",""),r.className+=" focus",e.className+=" focus"}},A.reLocate=function(){var e=T.adsArray;for(i in e){var t=e[i];t.locate&&t.locate()}},A.recordImage=function(t){var i=encodeURIComponent(encodeURIComponent(t.src)),n=d.widgetSid,s=(encodeURIComponent(encodeURIComponent(e.location.href)),encodeURIComponent(encodeURIComponent(a.title))),r=d.ourl,o=t.insId,c=(new Date).getTime();r+="?iu="+i+"&pd="+n+"&t="+s+"&index="+o+"&time="+c,p.importFile("js",r)},A.modules={adApp:function(e){if(d.showFootAd&&0!=e.data.badsSpot.length){var t,i,n,s,r,o=d.width;if(e.isFirstApp?(t=A.createTab("ad","推广","first"),e.isFirstApp=!1):t=A.createTab("ad","推广"),n=e.data,s=n.badsSpot[0],i=a.createElement("li"),i.className="ad",s.adClickMonitorUrl){var c=s.adClickMonitorUrl+encodeURIComponent(s.adsLinkUrl||"");r=d.redurl+"?tty=0&mx=&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift=&at="+(s.adsType||"")+"&ad="+(s.adsId||"")+"&rurl="+encodeURIComponent(encodeURIComponent(c))}else r=d.redurl+"?tty=0&mx=&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift=&at="+(s.adsType||"")+"&ad="+(s.adsId||"")+"&rurl="+encodeURIComponent(encodeURIComponent(s.adsLinkUrl||""));return str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>产品推广</h3><div class="main-cont">',3==s.adsType?str+="<a class='large-image' target='_blank' href='"+r+"'><img src='"+s.adsPicUrl+"' alt=''/></a>":9==s.adsType?(str+='<object id="afg-adloader" width="'+o+'" height="'+o+'"  align="middle" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000">',str+='<param value="always" name="allowScriptAccess"/><param value="'+s.adsPicUrl+'" name="movie"/><param value="high" name="quality"/><param value="opaque" name="wmode"/><param value="high" name="quality"><param value="#F1F1F1" name="bgcolor"/>',str+='<embed width="'+o+'" height="'+o+'" align="middle" pluginspage="http://www.adobe.com/go/getflashplayer"  type="application/x-shockwave-flash" allowscriptaccess="always" wmode="opaque"  bgcolor="#F1F1F1" quality="high" src="'+s.adsPicUrl+'"></object>',str+='<a class="flash-cover" href="'+r+'" target="_blank"></a>'):!s.adsLinkUrl&&s.description&&(str+='<iframe src="'+s.description+'" scrolling="no" height="'+d.height+'" width="'+d.width+'" frameborder="0" border="0" marginwidth="0" marginheight="0"></iframe>'),str+="</div>",i.innerHTML=str,{tab:t,cont:i}}},shopApp:function(e){if(d.showAd&&0!=e.data.adsSpot.length){var t,i,n,s,r,o,c,l,p,h,m='<div class="in-shop-selector">';e.isFirstApp?(t=A.createTab("shop","折扣","first"),e.isFirstApp=!1):t=A.createTab("shop","折扣"),s=e.data,i=a.createElement("li"),i.className="shop",n='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>品牌折扣</h3><div class="main-cont">',n+='<div class="in-slider-container">';for(var u=0,f=s.adsSpot.length;f>u;u++)h=0==u?" focus":"",r=s.adsSpot[u],e.createSpot(r,u),o=d.redurl+"?tty=0&mx="+r.metrix+"&muh="+s.imageUrlHash+"&pd="+r.widgetSid+"&ift=&at="+r.adsType+"&ad="+r.adsId+"&rurl="+encodeURIComponent(encodeURIComponent(r.adsLinkUrl)),l=r.adsTitle,p=r.adsDiscount||r.adsPrice,c=r.adsPicUrl.replace("160x160",d.width+"x"+d.width),n+='<a target="_blank" class="pro-box'+h+'" href="'+o+'"><img src="'+c+'"/><span class="pro-info"><span class="pro-name">'+l+'</span><span class="pro-tobuy"><em>进入商店</em></span><span class="pro-price">¥'+p+"</span></span></a>",f>1&&(m+='<a href="javascript:;" target="_self" class="select-item'+h+'"></a>');return n+="</div>"+m+"</div></div>",i.innerHTML=n,{tab:t,cont:i}}},weiboApp:function(e){if(d.showWeibo&&0!=e.data.weiboSpot.length){var t,i,n,s,r,o,c,l,p="",h="",m='<div class="in-weibo-selector">';e.isFirstApp?(t=A.createTab("weibo","微博","first"),e.isFirstApp=!1):t=A.createTab("weibo","微博"),n=e.data,i=a.createElement("li"),i.className="weibo",p='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>相关微博</h3><div class="main-cont">',p+='<div class="in-slider-container">';for(var u=0,f=n.weiboSpot.length;f>u;u++)h=0==u?" focus":"",s=n.weiboSpot[u],e.createSpot(s,u),l=s.avatar,icon=s.icon,r=s.title,c=s.latestStatus,o=d.redurl+"?tty=1&mx="+s.metrix+"&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift="+s.type+"&at=&ad=&rurl="+encodeURIComponent(encodeURIComponent(s.userUrl)),p+='<div class="weibo-item'+h+'"><div class="left"><a href="'+o+'" target="_blank" title="'+r+'"><img src="'+l+'"/></a></div><div class="right"><h3><a href="'+o+'" target="_blank">'+r+'</a></h3><p><em class="arrow-one"></em><em class="arrow-two"></em>'+c+'</p><div class="icon-section"><a href="'+o+'" target="_blank"><img src="'+icon+'"/></a></div></div></div>',f>1&&(m+='<a href="javascript:;" target="_self" class="select-item'+h+'"></a>');return p+="</div>"+m+"</div></div>",i.innerHTML=p,{tab:t,cont:i}}},wikiApp:function(e){if(d.showWiki&&0!=e.data.wikiSpot.length){var t,i,n,s,r,o,c,l,p="",h="",m='<div class="in-wiki-selector">';e.isFirstApp?(t=A.createTab("wiki","百科","first"),e.isFirstApp=!1):t=A.createTab("wiki","百科"),n=e.data,i=a.createElement("li"),i.className="wiki",p='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>相关百科</h3><div class="main-cont">',p+='<div class="in-slider-container">';for(var u=0,f=n.wikiSpot.length;f>u;u++)h=0==u?" focus":"",s=n.wikiSpot[u],e.createSpot(s,u),l=s.firstimg,r=s.title,c=s.summary,o=d.redurl+"?tty=1&mx="+s.metrix+"&muh="+n.imageUrlHash+"&pd="+n.widgetSid+"&ift="+s.type+"&at=&tg="+encodeURIComponent(encodeURIComponent(r))+"&rurl="+encodeURIComponent(encodeURIComponent(s.url)),p+='<div class="wiki-item'+h+'"><div class="left"><a class="thumb" href="'+o+'" target="_blank" title="'+r+'"><img src="'+l+'"/></a><h3><a class="tagName" href="'+o+'" target="_blank">'+r+'</a></h3></div><div class="right"><p><em class="arrow-one"></em><em class="arrow-two"></em>'+c+'</p><div class="icon-section"><a href="'+o+'" target="_blank"><img src="http://static.instreet.cn/widgets/push/images/icon_baike.png"/></a></div></div></div>',f>1&&(m+='<a href="javascript:;" target="_self" class="select-item'+h+'"></a>');return p+="</div>"+m+"</div></div>",i.innerHTML=p,{tab:t,cont:i}}},newsApp:function(e){if(d.showNews){var t,i,n=e.data,s=d.width,r=d.height,o=l+"news?size="+s+"&pd="+n.widgetSid+"&muh="+n.imageUrlHash;e.isFirstApp?(t=A.createTab("news","新闻","first"),e.isFirstApp=!1):t=A.createTab("news","新闻");var i=a.createElement("li");return i.className="news",str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>热点新闻</h3><div class="main-cont">',str+='<iframe name="weather_inc" src="'+o+'" width="'+s+'" height="'+r+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>',str+="</div>",i.innerHTML=str,{tab:t,cont:i}}},weatherApp:function(e){if(d.showWeather){var t,i,n=d.width,s="http://www.thinkpage.cn/weather/weather.aspx?uid=&cid=101010100&l=zh-CHS&p=TWC&a=1&u=C&s=1&m=0&x=1&d=3&fc=&bgc=&bc=&ti=1&in=1&li=2&ct=iframe";e.isFirstApp?(t=A.createTab("weather","天气","first"),e.isFirstApp=!1):t=A.createTab("weather","天气");var i=a.createElement("li");return i.className="weather",str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>天气预报</h3><div class="main-cont">',str+='<iframe name="weather_inc" src="'+s+'" width="'+n+'" height="110" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" allowtransparency="true" ></iframe>',str+="</div>",i.innerHTML=str,{tab:t,cont:i}}},shareApp:function(e){if(d.showShareButton){var t,i;e.isFirstApp?(t=A.createTab("share","分享","first"),e.isFirstApp=!1):t=A.createTab("share","分享");var i=a.createElement("li");return i.className="share",str='<h3 class="title clearfix"><a title="关闭" href="javascript:;" target="_self" class="in-close">×</a>图片分享</h3><div class="main-cont">',str+='<div class="in-share-icons"><a title="新浪微博" class="sina-ico" href="javascript:;" target="_self"></a><a title="腾讯微博" class="tx-ico" href="javascript:;" target="_self"></a><a title="QQ空间" class="qzone-ico" href="javascript:;" target="_self"></a><a title="人人网" class="renren-ico" href="javascript:;" target="_self"></a><a title="搜狐微博" class="sohu-ico" href="javascript:;" target="_self"></a><a title="网易微博" class="wangyi-ico" href="javascript:;" target="_self"></a><a title="豆瓣" class="douban-ico" href="javascript:;" target="_self"></a><a title="开心网" class="kaixin-ico" href="javascript:;" target="_self"></a>',str+="</div></div>",i.innerHTML=str,{tab:t,cont:i}}}};var C=function(e){e=e||0;for(var t=a.getElementsByTagName("img"),i=0,n=t.length;n>i;i++){var s=t[i];1==s.insDataLoading||s.getAttribute("instreet_data_loading")||1==s.insDataLoaded||s.getAttribute("instreet_data_loaded")||(s.insId===undefined&&(s.insId=r.length),s.setAttribute("instreet_img_id",s.insId),r[s.insId]=s,T.onImgLoad(s))}5>e&&setTimeout(function(){C(++e)},1e3)},U=function(e){if(e&&"object"==typeof e){for(var t in e)d[t]=e[t];d.color=d.color&&d.color.toLowerCase()}};w(function(){t()})})(window);